{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 28fa990be9a14dd5b3aa","webpack:///./examples/todomvc/main.js","webpack:///./all_tags.js","webpack:///./app.js","webpack:///./state.js","webpack:///./index.js","webpack:///./tags.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","Header","_index","header","h1","input","placeholder","autofocus","onkeypress","e","keyCode","this","element","length","app","update","$push","completed","content","Main","state","div","section","t","todos","type","onclick","all_completed","reduce","b","$any","label","for","TodoList","filter","none","Footer","Info","ul","map","todo","i","li","class","editing","checked","ondblclick","button","$del_at","$merge","footer","span","strong","n","info","a","style","cursor","window","location","hash","$filter","_createClass","defineProperties","target","props","descriptor","defineProperty","key","protoProps","staticProps","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","getter","init_state","JSON","parse","localStorage","getItem","Application","_App","apply","arguments","setItem","stringify","_get2","_len","args","Array","_key","console","time","concat","timeEnd","App","document","getElementById","onhashchange","href","init","all_tags","_toConsumableArray","arr","isArray","arr2","from","_len8","_key19","thunk","Thunk","_typeof","name","func","slice","_len9","_key20","node","Node","arg1","arg2","tag","set_selector","set_children","set_properties","equal","type_a","type_b","SubState","keys_a","keys","keys_b","setAfterThunkCallFunc","setBeforeThunkCallFunc","Symbol","iterator","obj","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","next","done","push","err","_state","_all_tags","patching","patch_tick","dirty_tree","next_dirty_tree","updated","update_count","element_cache","arg","HTMLElement","node_func","_len2","_key2","beforeUpdate","update_state","afterUpdate","_patch","patch","_patch2","_patch3","_patch4","fn","res","innerHTML","_len3","_key3","path","_len4","_key4","_len5","_key5","ret","__is_op","setup_state_object","hasOwnProperty","k","__aff_tick","last_element","last_node","last_thunk","should_update","last_arg","max_dirty_index","max_same_index","last_path","index","getNode","toElement","warning","warn","parentNode","insertBefore","removeChild","tagName","toLowerCase","patch_node","text","nodeValue","style_type","last_style_type","className","attributes","valueType","setAttribute","removeAttribute","events","element_set_listener","bind","serial","__element_serial","element_events","children","common_length","Math","min","child_elements","childNodes","l","appendChild","firstChild","hooks","patched","forEach","_app","_len6","_key17","_len7","_key18","subpath","_name","beforeThunkCallFunc","afterThunkCallFunc","element_serial","selector","classes","parts","match","part","charAt","substring","cls","join","properties","v","test","created","child","createTextNode","_app$element_cache$ta","pop","_app$element_cache$ta2","createElement","backgroundColor","color","fontWeight","next_element_serial","ev_type","event_set","addEventListener","substr","ev","pick","new_obj","$reduce","$inc","op","$dec","spec","o2","elem","accumulated","what","acc","cur","$map","__predict_any","_tags","_extends","assign","source","helpers","toUpperCase","display","clear"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _index = __webpack_require__(4);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar init_state = JSON.parse(window.localStorage.getItem('todos')) || {\n\t  todos: [{\n\t    completed: false,\n\t    content: 'foo'\n\t  }],\n\t  filter: 'All'\n\t};\n\t\n\tvar Application = function (_App) {\n\t  _inherits(Application, _App);\n\t\n\t  function Application() {\n\t    _classCallCheck(this, Application);\n\t\n\t    return _possibleConstructorReturn(this, (Application.__proto__ || Object.getPrototypeOf(Application)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(Application, [{\n\t    key: 'afterUpdate',\n\t    value: function afterUpdate(state) {\n\t      window.localStorage.setItem('todos', JSON.stringify(state));\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      var _get2;\n\t\n\t      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t        args[_key] = arguments[_key];\n\t      }\n\t\n\t      console.time('update ' + args);\n\t      (_get2 = _get(Application.prototype.__proto__ || Object.getPrototypeOf(Application.prototype), 'update', this)).call.apply(_get2, [this].concat(args));\n\t      console.timeEnd('update ' + args);\n\t    }\n\t  }]);\n\t\n\t  return Application;\n\t}(_index.App);\n\t\n\tvar app = new Application(document.getElementById('app'), init_state);\n\t\n\tfunction Header() {\n\t  return (0, _index.header)('.header', [(0, _index.h1)('todos'), (0, _index.input)('.new-todo', {\n\t    placeholder: \"What needs to be done?\",\n\t    autofocus: 'autofocus',\n\t    onkeypress: function onkeypress(e) {\n\t      if (e.keyCode == 13 && this.element.value.length > 0) {\n\t        app.update('todos', (0, _index.$push)({\n\t          completed: false,\n\t          content: this.element.value\n\t        }));\n\t        this.element.value = '';\n\t      }\n\t    }\n\t  })]);\n\t}\n\t\n\tfunction Main(state) {\n\t  return (0, _index.div)([(0, _index.section)('.todoapp', [(0, _index.t)(Header), state.todos.length > 0 ? (0, _index.section)('.main', [(0, _index.input)('.toggle-all', {\n\t    type: 'checkbox',\n\t    onclick: function onclick() {\n\t      var all_completed = app.state.todos.reduce(function (b, c) {\n\t        return b && c.completed;\n\t      }, true);\n\t      app.update('todos', _index.$any, 'completed', all_completed ? false : true);\n\t    }\n\t  }), (0, _index.label)({\n\t    for: 'toggle-all'\n\t  }, 'Mark all as complete'), (0, _index.t)(TodoList, state.todos, state.filter)]) : _index.none, state.todos.length > 0 ? (0, _index.t)(Footer, state.todos, state.filter) : _index.none]), Info]);\n\t}\n\t\n\tfunction TodoList(todos, filter) {\n\t  return (0, _index.ul)('.todo-list', todos.map(function (todo, i) {\n\t    if (filter == 'Active' && todo.completed) {\n\t      return _index.none;\n\t    } else if (filter == 'Completed' && !todo.completed) {\n\t      return _index.none;\n\t    }\n\t    return (0, _index.li)({\n\t      class: {\n\t        completed: todo.completed,\n\t        editing: todo.editing\n\t      }\n\t    }, [(0, _index.div)('.view', [(0, _index.input)('.toggle', {\n\t      type: 'checkbox',\n\t      checked: todo.completed ? 'checked' : false,\n\t      onclick: function onclick() {\n\t        app.update('todos', i, 'completed', this.element.checked);\n\t      }\n\t    }), (0, _index.label)({\n\t      ondblclick: function ondblclick() {\n\t        app.update('todos', i, 'editing', true);\n\t      }\n\t    }, todo.content), (0, _index.button)('.destroy', {\n\t      onclick: function onclick() {\n\t        app.update('todos', (0, _index.$del_at)(i));\n\t      }\n\t    })]), (0, _index.input)('.edit', {\n\t      value: todo.content,\n\t      onkeypress: function onkeypress(e) {\n\t        if (e.keyCode == 13) {\n\t          app.update('todos', i, (0, _index.$merge)({\n\t            'content': this.element.value,\n\t            'editing': false\n\t          }));\n\t        }\n\t      }\n\t    })]);\n\t  }));\n\t}\n\t\n\tfunction Footer(todos, filter) {\n\t  return (0, _index.footer)('.footer', [(0, _index.span)('.todo-count', [(0, _index.strong)(todos.reduce(function (n, c) {\n\t    return n + (c.completed ? 0 : 1);\n\t  }, 0)), ' item left']), (0, _index.ul)('.filters', [['#/', 'All'], ['#/active', 'Active'], ['#/completed', 'Completed']].map(function (info) {\n\t    return (0, _index.li)([(0, _index.a)({\n\t      style: { cursor: 'pointer' },\n\t      class: filter == info[1] ? 'selected' : '',\n\t      onclick: function onclick() {\n\t        window.location.hash = info[0];\n\t      }\n\t    }, info[1])]);\n\t  })), todos.reduce(function (b, c) {\n\t    return b || c.completed;\n\t  }, false) ? (0, _index.button)({\n\t    class: 'clear-completed',\n\t    onclick: function onclick() {\n\t      app.update('todos', (0, _index.$filter)(function (todo) {\n\t        return !todo.completed;\n\t      }));\n\t    }\n\t  }, 'Clear completed') : _index.none]);\n\t}\n\t\n\twindow.onhashchange = function () {\n\t  var hash = window.location.hash;\n\t  if (hash == '#/active') {\n\t    app.update('filter', 'Active');\n\t  } else if (hash == '#/completed') {\n\t    app.update('filter', 'Completed');\n\t  } else {\n\t    app.update('filter', 'All');\n\t  }\n\t};\n\t\n\tvar Info = (0, _index.footer)('.info', [(0, _index.p)('Double-click to edit a todo'), (0, _index.p)(['Created by ', (0, _index.a)({ href: 'http://todomvc.com' }, 'reusee@qq.com')])]);\n\t\n\tapp.init(Main);\n\t\n\twindow.onhashchange();\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar all_tags = exports.all_tags = ['a', 'abbr', 'acronym', 'address', 'applet', 'area', 'article', 'aside', 'audio', 'b', 'base', 'basefont', 'bdi', 'bdo', 'bgsound', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'command', 'content', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'frame', 'frameset', 'head', 'header', 'hgroup', 'hr', 'html', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7', 'i', 'iframe', 'image', 'img', 'input', 'ins', 'isindex', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'listing', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'multicol', 'nav', 'nobr', 'noembed', 'noframes', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'plaintext', 'pre', 'progress', 'q', 'rp', 'rt', 'rtc', 'ruby', 's', 'samp', 'script', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr', 'xmp'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.setAfterThunkCallFunc = exports.setBeforeThunkCallFunc = exports.App = undefined;\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.t = t;\n\texports.e = e;\n\texports.equal = equal;\n\t\n\tvar _state = __webpack_require__(3);\n\t\n\tvar _all_tags = __webpack_require__(1);\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar App = exports.App = function () {\n\t  function App() {\n\t    _classCallCheck(this, App);\n\t\n\t    this.node = null;\n\t    this.patching = false;\n\t    this.patch_tick = 1;\n\t    this.dirty_tree = {};\n\t    this.next_dirty_tree = {};\n\t    this.updated = false;\n\t    this.update_count = 0;\n\t    this.element_cache = {};\n\t    for (var i = 0; i < _all_tags.all_tags.length; i++) {\n\t      this.element_cache[_all_tags.all_tags[i]] = [];\n\t    }\n\t    this.init.apply(this, arguments);\n\t  }\n\t\n\t  _createClass(App, [{\n\t    key: 'init',\n\t    value: function init() {\n\t      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t        args[_key] = arguments[_key];\n\t      }\n\t\n\t      for (var i = 0; i < args.length; i++) {\n\t        var arg = args[i];\n\t        if (arg instanceof HTMLElement) {\n\t          this.element = arg;\n\t        } else if (typeof arg == 'function') {\n\t          this.node_func = arg;\n\t        } else {\n\t          this.state = arg;\n\t        }\n\t      }\n\t      if (this.element !== undefined && this.node_func !== undefined && this.state !== undefined) {\n\t        this.update();\n\t      }\n\t    }\n\t  }, {\n\t    key: 'beforeUpdate',\n\t    value: function beforeUpdate() {}\n\t  }, {\n\t    key: 'afterUpdate',\n\t    value: function afterUpdate() {}\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t        args[_key2] = arguments[_key2];\n\t      }\n\t\n\t      this.beforeUpdate.apply(this, [this.state].concat(args));\n\t      this.state = this.update_state.apply(this, [this.next_dirty_tree, this.state].concat(args));\n\t      this.afterUpdate.apply(this, [this.state].concat(args));\n\t      if (!this.element) {\n\t        return this.state;\n\t      }\n\t      if (!this.patching) {\n\t        this.patching = true;\n\t        this.updated = false;\n\t        this.update_count = 0;\n\t        this.patch_tick++;\n\t        this.dirty_tree = this.next_dirty_tree;\n\t        this.next_dirty_tree = {};\n\t\n\t        var _patch = this.patch(this.element, this.node_func(this.state), this.node);\n\t\n\t        var _patch2 = _slicedToArray(_patch, 2);\n\t\n\t        this.element = _patch2[0];\n\t        this.node = _patch2[1];\n\t\n\t        while (this.updated) {\n\t          if (this.update_count > 4096) {\n\t            // infinite loop\n\t            throw ['infinite loop in updating', args];\n\t          }\n\t          // if state is updated when patching, patch again\n\t          this.updated = false;\n\t          this.patch_tick++;\n\t          this.dirty_tree = this.next_dirty_tree;\n\t          this.next_dirty_tree = {};\n\t\n\t          var _patch3 = this.patch(this.element, this.node_func(this.state), this.node);\n\t\n\t          var _patch4 = _slicedToArray(_patch3, 2);\n\t\n\t          this.element = _patch4[0];\n\t          this.node = _patch4[1];\n\t        }\n\t        this.patching = false;\n\t        this.update_count = 0;\n\t      } else {\n\t        // state updated when patching\n\t        this.updated = true;\n\t        this.update_count++;\n\t      }\n\t      return this.state;\n\t    }\n\t  }, {\n\t    key: 'tap',\n\t    value: function tap(fn) {\n\t      var res = fn(this.state);\n\t      if (res) {\n\t        this.update.apply(this, _toConsumableArray(Array.isArray(res) ? res : [res]));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'html',\n\t    value: function html() {\n\t      return this.element.innerHTML;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n\t        args[_key3] = arguments[_key3];\n\t      }\n\t\n\t      var path = args;\n\t      if (path.length == 1 && Array.isArray(path[0])) {\n\t        path = path[0];\n\t      }\n\t      var obj = this.state;\n\t      for (var i = 0; i < path.length; i++) {\n\t        obj = obj[path[i]];\n\t      }\n\t      return obj;\n\t    }\n\t  }, {\n\t    key: 'sub',\n\t    value: function sub() {\n\t      for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n\t        args[_key4] = arguments[_key4];\n\t      }\n\t\n\t      var path = args;\n\t      if (path.length == 1 && Array.isArray(path[0])) {\n\t        path = path[0];\n\t      }\n\t      return new SubState(this, path);\n\t    }\n\t  }, {\n\t    key: 'update_state',\n\t    value: function update_state(dirty_tree, obj) {\n\t      for (var _len5 = arguments.length, args = Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {\n\t        args[_key5 - 2] = arguments[_key5];\n\t      }\n\t\n\t      if (args.length === 0) {\n\t        return obj;\n\t      } else if (args.length === 1) {\n\t        var ret = void 0;\n\t        if (_typeof(args[0]) === 'object' && args[0].__is_op) {\n\t          ret = args[0].apply(obj, this);\n\t          if (ret === obj) {\n\t            this.setup_state_object(ret);\n\t          }\n\t        } else {\n\t          ret = args[0];\n\t        }\n\t        return ret;\n\t      } else {\n\t        if (!obj) {\n\t          obj = {};\n\t        }\n\t        if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object') {\n\t          if (!obj.hasOwnProperty('__aff_tick')) {\n\t            this.setup_state_object(obj);\n\t          }\n\t          var key = args[0];\n\t          for (var k in obj) {\n\t            if (k == key || key === _state.$any) {\n\t              if (!dirty_tree[k]) {\n\t                dirty_tree[k] = {};\n\t              }\n\t              obj[k] = this.update_state.apply(this, [dirty_tree[k], obj[k]].concat(_toConsumableArray(args.slice(1))));\n\t            }\n\t          }\n\t          if (key !== _state.$any && !(key in obj)) {\n\t            if (!dirty_tree[key]) {\n\t              dirty_tree[key] = {};\n\t            }\n\t            obj[key] = this.update_state.apply(this, [dirty_tree[key], undefined].concat(_toConsumableArray(args.slice(1))));\n\t          }\n\t          obj.__aff_tick = this.patch_tick + 1;\n\t          return obj;\n\t        } else {\n\t          throw ['bad update path', obj, args];\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'setup_state_object',\n\t    value: function setup_state_object(obj) {\n\t      if (obj.hasOwnProperty('__aff_tick')) {\n\t        obj.__aff_tick = this.patch_tick + 1;\n\t        return;\n\t      }\n\t      Object.defineProperty(obj, '__aff_tick', {\n\t        configurable: false,\n\t        enumerable: false,\n\t        writable: true,\n\t        value: this.patch_tick + 1\n\t      });\n\t    }\n\t\n\t    // patch last_element to represent node attributes, with diffing last_node\n\t\n\t  }, {\n\t    key: 'patch',\n\t    value: function patch(last_element, node, last_node) {\n\t      // thunk\n\t      var last_thunk = void 0;\n\t      if (last_node && last_node instanceof Thunk) {\n\t        last_thunk = last_node;\n\t        last_node = last_thunk.node;\n\t      }\n\t      var thunk = void 0;\n\t      if (node instanceof Thunk) {\n\t        thunk = node;\n\t      }\n\t\n\t      var should_update = false;\n\t      if (!thunk || !last_thunk) {\n\t        should_update = true;\n\t      } else if (thunk.name != last_thunk.name) {\n\t        should_update = true;\n\t      } else if (thunk.args.length != last_thunk.args.length) {\n\t        should_update = true;\n\t      } else {\n\t        for (var i = 0; i < thunk.args.length; i++) {\n\t          var arg = thunk.args[i];\n\t          var last_arg = last_thunk.args[i];\n\t          if (arg instanceof SubState && last_arg instanceof SubState) {\n\t            var max_dirty_index = -1;\n\t            var max_same_index = -1;\n\t            var dirty_tree = this.dirty_tree;\n\t            var last_path = last_arg.path;\n\t            for (var index = 0; index < arg.path.length; index++) {\n\t              if (dirty_tree && dirty_tree[arg.path[index]]) {\n\t                dirty_tree = dirty_tree[arg.path[index]];\n\t                max_dirty_index = index;\n\t              }\n\t              if (last_path[index] == arg.path[index]) {\n\t                max_same_index = index;\n\t              }\n\t            }\n\t            if (max_dirty_index == arg.path.length - 1) {\n\t              should_update = true;\n\t              break;\n\t            }\n\t            if (max_same_index != arg.path.length - 1) {\n\t              should_update = true;\n\t              break;\n\t            }\n\t          } else if (arg === last_arg && (typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) === 'object' && arg.__aff_tick === this.patch_tick) {\n\t            should_update = true;\n\t            break;\n\t          } else if (!equal(arg, last_arg)) {\n\t            should_update = true;\n\t            break;\n\t          }\n\t        }\n\t      }\n\t\n\t      if (thunk) {\n\t        if (last_thunk && !should_update) {\n\t          // reuse node\n\t          thunk.node = last_thunk.node;\n\t          // reuse element\n\t          thunk.element = last_thunk.element;\n\t        }\n\t        node = thunk.getNode();\n\t      }\n\t\n\t      // Thunk.getNode may return another Thunk, patch recursively\n\t      if (node instanceof Thunk || last_node instanceof Thunk) {\n\t        return this.patch(last_element, node, last_node);\n\t      }\n\t\n\t      // no need to patch if two Nodes is the same object\n\t      // if thunk's node is reuse, will return here\n\t      if (node === last_node) {\n\t        return [last_element, node];\n\t      }\n\t\n\t      // not patchable, build a new element\n\t      if (\n\t      // not diffable\n\t      !last_node ||\n\t      // different tag, no way to patch\n\t      node.tag != last_node.tag) {\n\t        var element = void 0;\n\t        if (!node || !node.toElement) {\n\t          element = warning('RENDER ERROR: cannot render ' + node).toElement();\n\t          console.warn('cannot render', node);\n\t        } else {\n\t          element = node.toElement(undefined, this);\n\t        }\n\t        // insert new then remove old\n\t        if (last_element.parentNode) {\n\t          last_element.parentNode.insertBefore(element, last_element);\n\t          last_element.parentNode.removeChild(last_element);\n\t        }\n\t        // cache last_element\n\t        if (last_node) {\n\t          this.element_cache[last_element.tagName.toLowerCase()].push([last_element, last_node]);\n\t        }\n\t\n\t        return [element, node];\n\t      }\n\t\n\t      return this.patch_node(last_element, node, last_node, thunk);\n\t    }\n\t  }, {\n\t    key: 'patch_node',\n\t    value: function patch_node(last_element, node, last_node, thunk) {\n\t      // innerHTML\n\t      if (node.innerHTML != last_node.innerHTML) {\n\t        last_element.innerHTML = node.innerHTML;\n\t      }\n\t\n\t      // text\n\t      if (node.text != last_node.text) {\n\t        last_element.nodeValue = node.text;\n\t      }\n\t\n\t      // id\n\t      if (node.id != last_node.id) {\n\t        last_element.id = node.id;\n\t      }\n\t\n\t      // styles\n\t      var style_type = _typeof(node.style);\n\t      var last_style_type = _typeof(last_node.style);\n\t      if (style_type != last_style_type || style_type == 'string') {\n\t        // not diffable\n\t        if (style_type == 'object') {\n\t          // remove all existing style\n\t          last_element.style = null;\n\t          // reset\n\t          for (var key in node.style) {\n\t            last_element.style[key] = node.style[key];\n\t          }\n\t        } else {\n\t          // set string style\n\t          if (node.style != last_node.style) {\n\t            last_element.style = node.style;\n\t          }\n\t        }\n\t      } else {\n\t        if (node.style && last_node.style) {\n\t          // common styles\n\t          for (var _key6 in node.style) {\n\t            if (node.style[_key6] != last_node.style[_key6]) {\n\t              last_element.style[_key6] = node.style[_key6];\n\t            }\n\t          }\n\t          // delete styles exist in old Node but not in new\n\t          if (_typeof(last_node.style) === 'object') {\n\t            for (var _key7 in last_node.style) {\n\t              if (!(_key7 in node.style)) {\n\t                last_element.style[_key7] = '';\n\t              }\n\t            }\n\t          }\n\t        } else if (node.style) {\n\t          // new Node only\n\t          for (var _key8 in node.style) {\n\t            last_element.style[_key8] = node.style[_key8];\n\t          }\n\t        } else if (last_node.style) {\n\t          // no style in new Node, delete all\n\t          last_element.style = undefined;\n\t        }\n\t      }\n\t\n\t      // class\n\t      if (node.class != last_node.class) {\n\t        last_element.className = node.class;\n\t      }\n\t\n\t      // attributes\n\t      if (node.attributes && last_node.attributes) {\n\t        // update common attributes\n\t        for (var _key9 in node.attributes) {\n\t          if (node.attributes[_key9] != last_node.attributes[_key9]) {\n\t            var value = node.attributes[_key9];\n\t            var valueType = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t            if (valueType == 'string' || valueType == 'number') {\n\t              last_element.setAttribute(_key9, value);\n\t              last_element[_key9] = value;\n\t            } else if (valueType == 'boolean') {\n\t              if (value) {\n\t                last_element.setAttribute(_key9, true);\n\t                last_element[_key9] = true;\n\t              } else {\n\t                last_element.removeAttribute(_key9);\n\t                last_element[_key9] = false;\n\t              }\n\t            }\n\t          }\n\t        }\n\t        // delete non-exist attributes\n\t        for (var _key10 in last_node.attributes) {\n\t          if (!(_key10 in node.attributes)) {\n\t            last_element.removeAttribute(_key10);\n\t            last_element[_key10] = undefined;\n\t          }\n\t        }\n\t      } else if (node.attributes) {\n\t        // set new attributes only\n\t        for (var _key11 in node.attributes) {\n\t          var _value = node.attributes[_key11];\n\t          var _valueType = typeof _value === 'undefined' ? 'undefined' : _typeof(_value);\n\t          if (_valueType == 'string' || _valueType == 'number') {\n\t            last_element.setAttribute(_key11, _value);\n\t            last_element[_key11] = _value;\n\t          } else if (_valueType == 'boolean') {\n\t            if (_value) {\n\t              last_element.setAttribute(_key11, true);\n\t              last_element[_key11] = true;\n\t            } else {\n\t              last_element.removeAttribute(_key11);\n\t              last_element[_key11] = false;\n\t            }\n\t          }\n\t        }\n\t      } else if (last_node.attributes) {\n\t        // no attributes in new Node, delete all\n\t        for (var _key12 in last_node.attributes) {\n\t          last_element.removeAttribute(_key12);\n\t          last_element[_key12] = undefined;\n\t        }\n\t      }\n\t\n\t      // events\n\t      // not implementing global event proxy\n\t      if (node.events && last_node.events) {\n\t        for (var _key13 in node.events) {\n\t          // set events, bind current node to callback function\n\t          // to enable referencing current node\n\t          element_set_listener(last_element, _key13, node.events[_key13].bind(node));\n\t        }\n\t        var serial = last_element.__element_serial;\n\t        for (var _key14 in element_events[serial]) {\n\t          if (!(_key14 in node.events)) {\n\t            element_events[serial][_key14] = false;\n\t          }\n\t        }\n\t      } else if (node.events) {\n\t        for (var _key15 in node.events) {\n\t          // set events, bind current node to callback function\n\t          element_set_listener(last_element, _key15, node.events[_key15].bind(node));\n\t        }\n\t      } else if (last_node.events) {\n\t        var _serial = last_element.__element_serial;\n\t        for (var _key16 in element_events[_serial]) {\n\t          element_events[_serial][_key16] = false;\n\t        }\n\t      }\n\t\n\t      // children\n\t      if (node.children && last_node.children) {\n\t        // patch common amount of children\n\t        var common_length = Math.min(node.children.length, last_node.children.length);\n\t        var child_elements = last_element.childNodes;\n\t        for (var i = 0; i < common_length; i++) {\n\t          // recursive patch\n\t          this.patch(child_elements[i], node.children[i], last_node.children[i]);\n\t        }\n\t        // insert new children\n\t        for (var _i = common_length, l = node.children.length; _i < l; _i++) {\n\t          if (!node.children[_i] || !node.children[_i].toElement) {\n\t            last_element.appendChild(warning('RENDER ERROR: cannot render ' + node.children[_i]).toElement());\n\t            console.warn('cannot render', node.children[_i]);\n\t          } else {\n\t            last_element.appendChild(node.children[_i].toElement(undefined, this));\n\t          }\n\t        }\n\t        // delete\n\t        for (var _i2 = common_length, _l = last_node.children.length; _i2 < _l; _i2++) {\n\t          last_element.removeChild(last_element.childNodes[common_length]);\n\t        }\n\t      } else if (node.children) {\n\t        // insert only\n\t        for (var _i3 = 0, _l2 = node.children.length; _i3 < _l2; _i3++) {\n\t          if (!node.children[_i3] || !node.children[_i3].toElement) {\n\t            last_element.appendChild(warning('RENDER ERROR: cannot render ' + node.children[_i3]).toElement());\n\t            console.warn('cannot render', node.children[_i3]);\n\t          } else {\n\t            last_element.appendChild(node.children[_i3].toElement(undefined, this));\n\t          }\n\t        }\n\t      } else if (last_node.children) {\n\t        // delete only\n\t        while (last_element.firstChild) {\n\t          last_element.removeChild(last_element.firstChild);\n\t        }\n\t      }\n\t\n\t      // set element\n\t      node.element = last_element;\n\t      if (thunk) {\n\t        thunk.element = last_element;\n\t      }\n\t\n\t      if (node.hooks && node.hooks.patched) {\n\t        node.hooks.patched.forEach(function (fn) {\n\t          return fn(last_element);\n\t        });\n\t      }\n\t\n\t      return [last_element, node];\n\t    }\n\t  }]);\n\t\n\t  return App;\n\t}();\n\t\n\tvar SubState = function () {\n\t  function SubState(app, path) {\n\t    _classCallCheck(this, SubState);\n\t\n\t    this.app = app;\n\t    this.path = path;\n\t  }\n\t\n\t  _createClass(SubState, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.app.get(this.path);\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      var _app;\n\t\n\t      for (var _len6 = arguments.length, args = Array(_len6), _key17 = 0; _key17 < _len6; _key17++) {\n\t        args[_key17] = arguments[_key17];\n\t      }\n\t\n\t      return (_app = this.app).update.apply(_app, _toConsumableArray(this.path).concat(args));\n\t    }\n\t  }, {\n\t    key: 'sub',\n\t    value: function sub() {\n\t      for (var _len7 = arguments.length, args = Array(_len7), _key18 = 0; _key18 < _len7; _key18++) {\n\t        args[_key18] = arguments[_key18];\n\t      }\n\t\n\t      var subpath = args;\n\t      if (subpath.length == 1 && Array.isArray(subpath[0])) {\n\t        subpath = subpath[0];\n\t      }\n\t      return new SubState(this.app, [].concat(_toConsumableArray(this.path), _toConsumableArray(subpath)));\n\t    }\n\t  }]);\n\t\n\t  return SubState;\n\t}();\n\t\n\tvar Thunk = function () {\n\t  function Thunk() {\n\t    _classCallCheck(this, Thunk);\n\t\n\t    this.func = null;\n\t    this.args = null;\n\t    this.node = null;\n\t    this.element = null;\n\t    this.name = null;\n\t  }\n\t\n\t  _createClass(Thunk, [{\n\t    key: 'toElement',\n\t    value: function toElement(_name, app) {\n\t      if (!this.element) {\n\t        var node = this.getNode();\n\t        if (!node || !node.toElement) {\n\t          this.element = warning('RENDER ERROR: cannot render ' + node).toElement();\n\t          console.warn('cannot render', node);\n\t        } else {\n\t          this.element = node.toElement(this.name, app);\n\t        }\n\t      }\n\t      return this.element;\n\t    }\n\t  }, {\n\t    key: 'getNode',\n\t    value: function getNode() {\n\t      if (!this.node) {\n\t        beforeThunkCallFunc(this);\n\t        this.node = this.func.apply(this, this.args);\n\t        afterThunkCallFunc(this);\n\t        if (!this.node) {\n\t          throw ['constructor of ' + (this.name || 'anonymous') + ' returned null value', this];\n\t        }\n\t      }\n\t      return this.node;\n\t    }\n\t  }]);\n\t\n\t  return Thunk;\n\t}();\n\t\n\t// thunk helper\n\t\n\t\n\tfunction t() {\n\t  for (var _len8 = arguments.length, args = Array(_len8), _key19 = 0; _key19 < _len8; _key19++) {\n\t    args[_key19] = arguments[_key19];\n\t  }\n\t\n\t  if (args.length == 0) {\n\t    throw ['no arguments to t()'];\n\t  }\n\t\n\t  var thunk = new Thunk();\n\t\n\t  switch (_typeof(args[0])) {\n\t    case 'string':\n\t      // named thunk\n\t      thunk.name = args[0];\n\t      thunk.func = args[1];\n\t      thunk.args = args.slice(2);\n\t      break;\n\t\n\t    case 'function':\n\t      thunk.func = args[0];\n\t      thunk.args = args.slice(1);\n\t      thunk.name = thunk.func.name;\n\t      break;\n\t  }\n\t\n\t  return thunk;\n\t}\n\t\n\t// element helper\n\tfunction e() {\n\t  for (var _len9 = arguments.length, args = Array(_len9), _key20 = 0; _key20 < _len9; _key20++) {\n\t    args[_key20] = arguments[_key20];\n\t  }\n\t\n\t  if (args.length === 0) {\n\t    throw ['no arguments to e()'];\n\t  }\n\t\n\t  // Thunk\n\t  if (typeof args[0] === 'function') {\n\t    var thunk = new Thunk();\n\t    thunk.func = args[0];\n\t    thunk.args = args.slice(1);\n\t    // set thunk name from function, may be undefined\n\t    thunk.name = thunk.func.name;\n\t    return thunk;\n\t  }\n\t\n\t  var node = new Node();\n\t\n\t  var arg1 = void 0,\n\t      arg2 = void 0;\n\t\n\t  switch (args.length) {\n\t    case 1:\n\t      // tag only, eg. e('hr')\n\t      node.tag = args[0];\n\t\n\t      break;\n\t\n\t    case 2:\n\t      // two args, first the tag, second a selector or children or properties\n\t      // eg. e('div', '#main .block')\n\t      // or e('div', 'Hello, world')\n\t      // or e('div', [ e('p', 'Hello, world') ])\n\t      // or e('div', { id: 'main' })\n\t      node.tag = args[0];\n\t      arg1 = args[1];\n\t\n\t      switch (typeof arg1 === 'undefined' ? 'undefined' : _typeof(arg1)) {\n\t        case 'string':\n\t          if (arg1[0] == '#' || arg1[0] == '.') {\n\t            // selector\n\t            node.set_selector(arg1);\n\t          } else {\n\t            // text node\n\t            node.set_children(arg1);\n\t          }\n\t          break;\n\t\n\t        case 'number':\n\t          node.set_children(arg1);\n\t          break;\n\t\n\t        case 'object':\n\t          if (Array.isArray(arg1) || arg1 instanceof Node || arg1 instanceof Thunk) {\n\t            // children\n\t            node.set_children(arg1);\n\t          } else {\n\t            // properties\n\t            node.set_properties(arg1);\n\t          }\n\t          break;\n\t\n\t        default:\n\t          throw ['bad argument at index 1 to e()', args];\n\t      }\n\t\n\t      break;\n\t\n\t    case 3:\n\t      // three args, first the tag, second a selector or properties, third children or properties\n\t      // eg. e('div', '#main', [ e('p', 'Hello') ])\n\t      // or e('div', { id: 'main' }, [])\n\t      node.tag = args[0];\n\t\n\t      arg1 = args[1];\n\t      switch (typeof arg1 === 'undefined' ? 'undefined' : _typeof(arg1)) {\n\t        case 'string':\n\t          node.set_selector(arg1);\n\t          break;\n\t        case 'object':\n\t          node.set_properties(arg1);\n\t          break;\n\t        default:\n\t          throw ['bad argument at index 1 to e()', args];\n\t      }\n\t\n\t      arg2 = args[2];\n\t      if ((typeof arg2 === 'undefined' ? 'undefined' : _typeof(arg2)) == 'object' && !Array.isArray(arg2) && !(arg2 instanceof Node) && !(arg2 instanceof Thunk)) {\n\t        node.set_properties(arg2);\n\t      } else {\n\t        node.set_children(arg2);\n\t      }\n\t\n\t      break;\n\t\n\t    case 4:\n\t      // four arguments. first tag, second selector, third properties, forth children\n\t      // eg e('div', '#main', { class: 'foo' }, [ e('div') ])\n\t      node.tag = args[0];\n\t      node.set_selector(args[1]);\n\t      node.set_properties(args[2]);\n\t      node.set_children(args[3]);\n\t\n\t      break;\n\t\n\t    default:\n\t      throw ['bad arguments to e()', args];\n\t  }\n\t\n\t  return node;\n\t}\n\t\n\tvar beforeThunkCallFunc = function beforeThunkCallFunc(thunk) {};\n\tvar afterThunkCallFunc = function afterThunkCallFunc(thunk) {};\n\tvar setBeforeThunkCallFunc = exports.setBeforeThunkCallFunc = function setBeforeThunkCallFunc(fn) {\n\t  beforeThunkCallFunc = fn;\n\t};\n\tvar setAfterThunkCallFunc = exports.setAfterThunkCallFunc = function setAfterThunkCallFunc(fn) {\n\t  afterThunkCallFunc = fn;\n\t};\n\t\n\tvar element_serial = 1;\n\t\n\tvar Node = function () {\n\t  function Node() {\n\t    _classCallCheck(this, Node);\n\t\n\t    this.tag = null;\n\t    this.id = null;\n\t    this.style = null;\n\t    this.class = null;\n\t    this.children = null;\n\t    this.attributes = null;\n\t    this.events = null;\n\t    this.text = null;\n\t    this.innerHTML = null;\n\t    this.element = null;\n\t    this.hooks = null;\n\t  }\n\t\n\t  _createClass(Node, [{\n\t    key: 'set_selector',\n\t    value: function set_selector(selector) {\n\t      var classes = [];\n\t      var parts = selector.match(/[.#][A-Za-z][A-Za-z0-9_:-]*/g);\n\t      for (var i = 0, l = parts.length; i < l; i++) {\n\t        var part = parts[i];\n\t        if (part.charAt(0) == '#') {\n\t          this.id = part.substring(1);\n\t        } else if (part.charAt(0) == '.') {\n\t          classes.push(part.substring(1));\n\t        }\n\t      }\n\t      var cls = classes.join(' ');\n\t      if (cls.length > 0) {\n\t        this.class = cls;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'set_properties',\n\t    value: function set_properties(properties) {\n\t      for (var key in properties) {\n\t        if (key == 'id' || key == 'innerHTML') {\n\t          // id, innerHTML\n\t          this[key] = properties[key];\n\t        } else if (key == 'class') {\n\t          var property = properties.class;\n\t          if (typeof property == 'string') {\n\t            this.class = property;\n\t          } else if ((typeof property === 'undefined' ? 'undefined' : _typeof(property)) == 'object') {\n\t            if (Array.isArray(property)) {\n\t              this.class = property.join(' ');\n\t            } else {\n\t              var classes = [];\n\t              for (var k in property) {\n\t                var v = property[k];\n\t                if (v) {\n\t                  classes.push(k);\n\t                }\n\t              }\n\t              this.class = classes.join(' ');\n\t            }\n\t          } else {\n\t            throw ['bad class', property];\n\t          }\n\t        } else if (key == 'style') {\n\t          // styles\n\t          this.style = properties.style;\n\t        } else if (/^on/.test(key) && typeof properties[key] === 'function') {\n\t          if (key == 'oncreated' || key == 'oncreate') {\n\t            this.hooks = this.hooks || {};\n\t            this.hooks.created = this.hooks.created || [];\n\t            this.hooks.created.push(properties[key]);\n\t          } else if (key == 'onpatch' || key == 'onpatched') {\n\t            this.hooks = this.hooks || {};\n\t            this.hooks.patched = this.hooks.patched || [];\n\t            this.hooks.patched.push(properties[key]);\n\t          } else {\n\t            // events\n\t            this.events = this.events || {};\n\t            this.events[key] = properties[key];\n\t          }\n\t        } else {\n\t          //if (\n\t          //  (this.tag == 'input' && key == 'checked' && !properties[key])\n\t          //  || (this.tag == 'input' && key == 'disabled' && !properties[key])\n\t          //  || (this.tag == 'button' && key == 'disabled' && !properties[key])\n\t          //) {\n\t          //  continue\n\t          //}\n\t          // attributes\n\t          this.attributes = this.attributes || {};\n\t          this.attributes[key] = properties[key];\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'set_children',\n\t    value: function set_children(children) {\n\t      this.children = this.children || [];\n\t      if (Array.isArray(children)) {\n\t        // flatten\n\t        for (var i = 0, l = children.length; i < l; i++) {\n\t          this.set_children(children[i]);\n\t        }\n\t      } else if (typeof children === 'string' || typeof children === 'number') {\n\t        var child = new Node();\n\t        child.text = children;\n\t        this.children.push(child);\n\t      } else {\n\t        this.children.push(children);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'toElement',\n\t    value: function toElement(name, app) {\n\t      var element = void 0;\n\t      if (this.text !== null) {\n\t        element = document.createTextNode(this.text);\n\t      } else {\n\t        // use cached element\n\t        if (app && app.element_cache[this.tag].length > 0) {\n\t          var _app$element_cache$ta = app.element_cache[this.tag].pop(),\n\t              _app$element_cache$ta2 = _slicedToArray(_app$element_cache$ta, 2),\n\t              _element = _app$element_cache$ta2[0],\n\t              last_node = _app$element_cache$ta2[1];\n\t\n\t          return app.patch_node(_element, this, last_node)[0];\n\t        }\n\t        element = document.createElement(this.tag);\n\t        element.setAttribute('aff-serial', element_serial);\n\t        if (name) {\n\t          element.setAttribute('aff-name', name);\n\t        }\n\t        element_serial++;\n\t      }\n\t      if (this.innerHTML !== null) {\n\t        element.innerHTML = this.innerHTML;\n\t      }\n\t      if (this.id !== null) {\n\t        element.id = this.id;\n\t      }\n\t      if (this.style !== null) {\n\t        if (_typeof(this.style) == 'object') {\n\t          for (var key in this.style) {\n\t            element.style[key] = this.style[key];\n\t          }\n\t        } else {\n\t          element.style = this.style;\n\t        }\n\t      }\n\t      if (this.class !== null) {\n\t        element.className = this.class;\n\t      }\n\t      if (this.children !== null) {\n\t        for (var i = 0, l = this.children.length; i < l; i++) {\n\t          if (!this.children[i] || !this.children[i].toElement) {\n\t            element.appendChild(warning('RENDER ERROR: cannot render ' + this.children[i]).toElement());\n\t            console.warn('cannot render', this.children[i]);\n\t          } else {\n\t            element.appendChild(this.children[i].toElement(undefined, app));\n\t          }\n\t        }\n\t      }\n\t      if (this.attributes !== null) {\n\t        for (var _key21 in this.attributes) {\n\t          var value = this.attributes[_key21];\n\t          var valueType = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t          if (valueType == 'string' || valueType == 'number') {\n\t            element.setAttribute(_key21, value);\n\t            element[_key21] = value;\n\t          } else if (valueType == 'boolean') {\n\t            if (value) {\n\t              element.setAttribute(_key21, true);\n\t              element[_key21] = true;\n\t            } else {\n\t              element.removeAttribute(_key21);\n\t              element[_key21] = false;\n\t            }\n\t          }\n\t        }\n\t      }\n\t      if (this.events !== null) {\n\t        for (var _key22 in this.events) {\n\t          // set event callback, bind current Node to callback\n\t          // constructor must not be arrow function to get proper 'this'\n\t          element_set_listener(element, _key22, this.events[_key22].bind(this));\n\t        }\n\t      }\n\t      this.element = element;\n\t      if (this.hooks && this.hooks.created) {\n\t        this.hooks.created.forEach(function (fn) {\n\t          return fn(element);\n\t        });\n\t      }\n\t      return element;\n\t    }\n\t  }]);\n\t\n\t  return Node;\n\t}();\n\t\n\tvar warning = function warning(text) {\n\t  return e('div', {\n\t    style: {\n\t      backgroundColor: 'yellow',\n\t      color: 'red',\n\t      fontWeight: 'bold'\n\t    }\n\t  }, text);\n\t};\n\t\n\tvar element_events = {};\n\tvar element_set_listener = function () {\n\t  var next_element_serial = 1;\n\t  return function (element, ev_type, fn) {\n\t    var serial = element.__element_serial;\n\t    if (!serial) {\n\t      serial = next_element_serial;\n\t      next_element_serial++;\n\t      element.__element_serial = serial;\n\t    }\n\t    var event_set = element_events[serial];\n\t    if (!event_set) {\n\t      event_set = {};\n\t      element_events[serial] = event_set;\n\t    }\n\t    if (!(ev_type in event_set)) {\n\t      element.addEventListener(ev_type.substr(2), function (ev) {\n\t        return element_events[serial][ev_type](ev);\n\t      });\n\t    }\n\t    event_set[ev_type] = fn;\n\t  };\n\t}();\n\t\n\tfunction equal(a, b) {\n\t  if (a === b) {\n\t    return true;\n\t  }\n\t  var type_a = typeof a === 'undefined' ? 'undefined' : _typeof(a);\n\t  var type_b = typeof b === 'undefined' ? 'undefined' : _typeof(b);\n\t  if (type_a !== type_b) {\n\t    return false;\n\t  }\n\t  if (type_a === 'object') {\n\t    if (a instanceof SubState && b instanceof SubState) {\n\t      return equal(a.get(), b.get());\n\t    }\n\t    // deep compare\n\t    var keys_a = Object.keys(a);\n\t    var keys_b = Object.keys(b);\n\t    if (keys_a.length != keys_b.length) {\n\t      return false;\n\t    }\n\t    for (var key in a) {\n\t      if (!equal(a[key], b[key])) {\n\t        return false;\n\t      }\n\t    }\n\t    return true;\n\t  } else if (type_a === 'function') {\n\t    return a.name === b.name;\n\t  }\n\t  return false;\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\texports.pick = pick;\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\t// operations \n\t\n\tvar $inc = exports.$inc = {\n\t  __is_op: true,\n\t  op: 'inc',\n\t  apply: function apply(obj) {\n\t    return (obj || 0) + 1;\n\t  }\n\t};\n\t\n\tvar $dec = exports.$dec = {\n\t  __is_op: true,\n\t  op: 'dec',\n\t  apply: function apply(obj) {\n\t    return obj - 1;\n\t  }\n\t};\n\t\n\tvar $merge = exports.$merge = function $merge(spec) {\n\t  return {\n\t    __is_op: true,\n\t    op: 'merge',\n\t    args: [spec],\n\t    apply: function apply(obj, app) {\n\t      if (Array.isArray(spec)) {\n\t        return app.update_state.apply(app, [app.dirty_tree, obj].concat(_toConsumableArray(spec)));\n\t      }\n\t      for (var key in spec) {\n\t        var o2 = spec[key];\n\t        if ((typeof o2 === 'undefined' ? 'undefined' : _typeof(o2)) == 'object' && !Array.isArray(o2) && !o2.__is_op) {\n\t          obj = app.update_state(app.dirty_tree, obj, key, $merge(o2));\n\t        } else {\n\t          obj = app.update_state(app.dirty_tree, obj, key, o2);\n\t        }\n\t      }\n\t      return obj;\n\t    }\n\t  };\n\t};\n\t\n\tvar $push = exports.$push = function $push(elem) {\n\t  return {\n\t    __is_op: true,\n\t    op: 'push',\n\t    args: [elem],\n\t    apply: function apply(obj) {\n\t      obj.push(elem);\n\t      return obj;\n\t    }\n\t  };\n\t};\n\t\n\tvar $reduce = exports.$reduce = function $reduce(fn, accumulated) {\n\t  var what = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'reduce';\n\t  return {\n\t    __is_op: true,\n\t    op: what,\n\t    args: [fn, accumulated],\n\t    apply: function apply(obj) {\n\t      for (var key in obj) {\n\t        accumulated = fn(accumulated, obj[key], key);\n\t      }\n\t      return accumulated;\n\t    }\n\t  };\n\t};\n\t\n\tvar $del_at = exports.$del_at = function $del_at(i) {\n\t  return $reduce(function (acc, cur, index) {\n\t    if (index != i) {\n\t      acc.push(cur);\n\t    }\n\t    return acc;\n\t  }, [], 'del_at');\n\t};\n\t\n\tvar $map = exports.$map = function $map(fn) {\n\t  return $reduce(function (acc, cur, index) {\n\t    acc.push(fn(cur));\n\t    return acc;\n\t  }, [], 'map');\n\t};\n\t\n\tvar $filter = exports.$filter = function $filter(fn) {\n\t  return {\n\t    __is_op: true,\n\t    op: 'filter',\n\t    args: [fn],\n\t    apply: function apply(obj) {\n\t      if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) == 'object') {\n\t        if (Array.isArray(obj)) {\n\t          var o2 = [];\n\t          for (var i = 0; i < obj.length; i++) {\n\t            if (fn(obj[i], i)) {\n\t              o2.push(obj[i]);\n\t            }\n\t          }\n\t          return o2;\n\t        } else {\n\t          var _o = {};\n\t          for (var k in obj) {\n\t            if (fn(obj[k], k) === true) {\n\t              _o[k] = obj[k];\n\t            }\n\t          }\n\t          return _o;\n\t        }\n\t      } else {\n\t        return fn(obj);\n\t      }\n\t    }\n\t  };\n\t};\n\t\n\t// predictions\n\t\n\tvar $any = exports.$any = { __predict_any: true };\n\t\n\t// utils\n\t\n\tfunction pick(obj) {\n\t  for (var _len = arguments.length, keys = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t    keys[_key - 1] = arguments[_key];\n\t  }\n\t\n\t  if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object') {\n\t    if (Array.isArray(obj)) {\n\t      var new_obj = [];\n\t      for (var i = 0; i < keys.length; i++) {\n\t        var key = keys[i];\n\t        if (obj[key] !== undefined) {\n\t          new_obj.push(obj[key]);\n\t        }\n\t      }\n\t      return new_obj;\n\t    } else {\n\t      var _new_obj = {};\n\t      for (var _i = 0; _i < keys.length; _i++) {\n\t        var _key2 = keys[_i];\n\t        if (obj[_key2] !== undefined) {\n\t          _new_obj[_key2] = obj[_key2];\n\t        }\n\t      }\n\t      return _new_obj;\n\t    }\n\t  } else {\n\t    throw ['not pickable', obj, keys];\n\t  }\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _app = __webpack_require__(2);\n\t\n\tObject.defineProperty(exports, 'App', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.App;\n\t  }\n\t});\n\tObject.defineProperty(exports, 't', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.t;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'e', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.e;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'setBeforeThunkCallFunc', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.setBeforeThunkCallFunc;\n\t  }\n\t});\n\tObject.defineProperty(exports, 'setAfterThunkCallFunc', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _app.setAfterThunkCallFunc;\n\t  }\n\t});\n\t\n\tvar _state = __webpack_require__(3);\n\t\n\tObject.keys(_state).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _state[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _tags = __webpack_require__(5);\n\t\n\tObject.keys(_tags).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _tags[key];\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _app = __webpack_require__(2);\n\t\n\tvar _all_tags = __webpack_require__(1);\n\t\n\tvar helpers = _all_tags.all_tags.reduce(function (helpers, tag) {\n\t  helpers[tag] = function () {\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _app.e.apply(undefined, [tag].concat(args));\n\t  };\n\t  helpers[tag.charAt(0).toUpperCase() + tag.slice(1)] = helpers[tag];\n\t  helpers[tag.toUpperCase()] = helpers[tag];\n\t  return helpers;\n\t}, {});\n\t\n\tmodule.exports = _extends({}, helpers, {\n\t\n\t  none: (0, _app.e)('div', {\n\t    style: {\n\t      display: 'none'\n\t    }\n\t  }),\n\t\n\t  clear: (0, _app.e)('div', {\n\t    style: {\n\t      clear: 'both'\n\t    }\n\t  })\n\t});\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 28fa990be9a14dd5b3aa","import {\n  App, t,\n  section, header, footer, h1, p, a, div, span,\n  input, none, ul, li, button, strong, label,\n  $any, $push, $merge, $del_at, $filter,\n} from '../../index'\n\nlet init_state = JSON.parse(window.localStorage.getItem('todos')) || {\n  todos: [\n    {\n      completed: false,\n      content: 'foo',\n    },\n  ],\n  filter: 'All',\n};\n\nclass Application extends App {\n  afterUpdate(state, ...args) {\n    window.localStorage.setItem('todos', JSON.stringify(state));\n  }\n\n  update(...args) {\n    console.time('update ' + args);\n    super.update(...args);\n    console.timeEnd('update ' + args);\n  }\n}\n\nlet app = new Application(\n  document.getElementById('app'),\n  init_state,\n);\n\nfunction Header() {\n  return header('.header', [\n    h1('todos'),\n    input('.new-todo', {\n      placeholder: \"What needs to be done?\",\n      autofocus: 'autofocus',\n      onkeypress(e) {\n        if (e.keyCode == 13 && this.element.value.length > 0) {\n          app.update('todos', $push({\n            completed: false,\n            content: this.element.value,\n          }));\n          this.element.value = '';\n        }\n      },\n    }),\n  ]);\n}\n\nfunction Main(state) {\n  return div([\n    section('.todoapp', [\n      t(Header),\n\n      state.todos.length > 0 ? section('.main', [\n        input('.toggle-all', {\n          type: 'checkbox',\n          onclick() {\n            let all_completed = app.state.todos.reduce((b, c) => b && c.completed, true);\n            app.update('todos', $any, 'completed', all_completed ? false : true);\n          },\n        }),\n        label({\n          for: 'toggle-all',\n        }, 'Mark all as complete'),\n        t(TodoList, state.todos, state.filter),\n      ]) : none,\n\n      state.todos.length > 0 ? t(Footer, state.todos, state.filter) : none,\n    ]),\n    Info,\n  ]);\n}\n\nfunction TodoList(todos, filter) {\n  return ul('.todo-list', todos.map((todo, i) =>  {\n    if (filter == 'Active' && todo.completed) {\n      return none;\n    } else if (filter == 'Completed' && !todo.completed) {\n      return none;\n    }\n    return li({\n      class: {\n        completed: todo.completed,\n        editing: todo.editing,\n      },\n    }, [\n      div('.view', [\n        input('.toggle', {\n          type: 'checkbox',\n          checked: todo.completed ? 'checked' : false,\n          onclick() {\n            app.update('todos', i, 'completed', this.element.checked);\n          },\n        }),\n        label({\n          ondblclick() {\n            app.update('todos', i, 'editing', true);\n          },\n        }, todo.content),\n        button('.destroy', {\n          onclick() {\n            app.update('todos', $del_at(i));\n          },\n        }),\n      ]),\n      input('.edit', {\n        value: todo.content,\n        onkeypress(e) {\n          if (e.keyCode == 13) {\n            app.update('todos', i, $merge({\n              'content': this.element.value,\n              'editing': false,\n            }));\n          }\n        },\n      }),\n    ]);\n  }));\n}\n\nfunction Footer(todos, filter) {\n  return footer('.footer', [\n    span('.todo-count', [\n      strong(todos.reduce((n, c) => {\n        return n + (c.completed ? 0 : 1);\n      }, 0)),\n      ' item left',\n    ]),\n    ul('.filters', [\n      ['#/', 'All'],\n      ['#/active', 'Active'],\n      ['#/completed', 'Completed'],\n    ].map(info => li([\n      a({\n        style: { cursor: 'pointer' },\n        class: filter == info[1] ? 'selected' : '',\n        onclick() {\n          window.location.hash = info[0];\n        },\n      }, info[1]),\n    ]))),\n    todos.reduce((b, c) => b || c.completed, false) ? button({\n      class: 'clear-completed',\n      onclick() {\n        app.update('todos', $filter(todo => !todo.completed));\n      },\n    }, 'Clear completed') : none,\n  ]);\n}\n\nwindow.onhashchange = () => {\n  let hash = window.location.hash;\n  if (hash == '#/active') {\n    app.update('filter', 'Active');\n  } else if (hash == '#/completed') {\n    app.update('filter', 'Completed');\n  } else {\n    app.update('filter', 'All');\n  }\n};\n\nlet Info = footer('.info', [\n  p('Double-click to edit a todo'),\n  p([\n    'Created by ',\n    a({ href: 'http://todomvc.com' }, 'reusee@qq.com'),\n  ]),\n]);\n\napp.init(Main);\n\nwindow.onhashchange();\n\n\n\n// WEBPACK FOOTER //\n// ./examples/todomvc/main.js","export let all_tags = [\n  'a', 'abbr', 'acronym', 'address', 'applet', 'area', 'article', 'aside', 'audio',\n  'b', 'base', 'basefont', 'bdi', 'bdo', 'bgsound', 'big', 'blink', 'blockquote', 'body', 'br', 'button',\n  'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'command', 'content',\n  'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt',\n  'element', 'em', 'embed',\n  'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'frame', 'frameset',\n  'head', 'header', 'hgroup', 'hr', 'html',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7',\n  'i', 'iframe', 'image', 'img', 'input', 'ins', 'isindex',\n  'kbd', 'keygen',\n  'label', 'legend', 'li', 'link', 'listing',\n  'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'multicol',\n  'nav', 'nobr', 'noembed', 'noframes', 'noscript',\n  'object', 'ol', 'optgroup', 'option', 'output',\n  'p', 'param', 'picture', 'plaintext', 'pre', 'progress',\n  'q',\n  'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'script', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup',\n  'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'tt',\n  'u', 'ul',\n  'var', 'video',\n  'wbr',\n  'xmp',\n];\n\n\n\n\n// WEBPACK FOOTER //\n// ./all_tags.js","import { $any } from './state'\nimport { all_tags } from './all_tags'\n\nexport class App {\n  constructor(...args) {\n    this.node = null;\n    this.patching = false;\n    this.patch_tick = 1;\n    this.dirty_tree = {};\n    this.next_dirty_tree = {};\n    this.updated = false;\n    this.update_count = 0;\n    this.element_cache = {};\n    for (let i = 0; i < all_tags.length; i++) {\n      this.element_cache[all_tags[i]] = [];\n    }\n    this.init(...args);\n  }\n\n  init(...args) {\n    for (let i = 0; i < args.length; i++) {\n      let arg = args[i];\n      if (arg instanceof HTMLElement) {\n        this.element = arg;\n      } else if (typeof arg == 'function') {\n        this.node_func = arg;\n      } else {\n        this.state = arg;\n      }\n    }\n    if (this.element !== undefined && this.node_func !== undefined && this.state !== undefined) {\n      this.update();\n    }\n  }\n\n  beforeUpdate() {\n  }\n\n  afterUpdate() {\n  }\n\n  update(...args) {\n    this.beforeUpdate(this.state, ...args);\n    this.state = this.update_state(this.next_dirty_tree, this.state, ...args);\n    this.afterUpdate(this.state, ...args);\n    if (!this.element) {\n      return this.state;\n    }\n    if (!this.patching) {\n      this.patching = true;\n      this.updated = false;\n      this.update_count = 0;\n      this.patch_tick++;\n      this.dirty_tree = this.next_dirty_tree;\n      this.next_dirty_tree = {};\n      [this.element, this.node] = this.patch(this.element, this.node_func(this.state), this.node);\n      while (this.updated) {\n        if (this.update_count > 4096) { // infinite loop\n          throw['infinite loop in updating', args];\n        }\n        // if state is updated when patching, patch again\n        this.updated = false;\n        this.patch_tick++;\n        this.dirty_tree = this.next_dirty_tree;\n        this.next_dirty_tree = {};\n        [this.element, this.node] = this.patch(this.element, this.node_func(this.state), this.node);\n      }\n      this.patching = false;\n      this.update_count = 0;\n    } else {\n      // state updated when patching\n      this.updated = true;\n      this.update_count++;\n    }\n    return this.state;\n  }\n\n  tap(fn) {\n    let res = fn(this.state);\n    if (res) {\n      this.update(...(Array.isArray(res) ? res : [res]));\n    }\n  }\n\n  html() {\n    return this.element.innerHTML;\n  }\n\n  get(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    let obj = this.state;\n    for (let i = 0; i < path.length; i++) {\n      obj = obj[path[i]];\n    }\n    return obj;\n  }\n\n  sub(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    return new SubState(this, path);\n  }\n\n  update_state(dirty_tree, obj, ...args) {\n    if (args.length === 0) {\n      return obj;\n    } else if (args.length === 1) {\n      let ret;\n      if (typeof args[0] === 'object' && args[0].__is_op) {\n        ret = args[0].apply(obj, this);\n        if (ret === obj) {\n          this.setup_state_object(ret);\n        }\n      } else {\n        ret = args[0];\n      }\n      return ret;\n    } else {\n      if (!obj) {\n        obj = {};\n      }\n      if (typeof obj === 'object') {\n        if (!obj.hasOwnProperty('__aff_tick')) {\n          this.setup_state_object(obj);\n        }\n        let key = args[0];\n        for (let k in obj) {\n          if (k == key || key === $any) {\n            if (!dirty_tree[k]) {\n              dirty_tree[k] = {};\n            }\n            obj[k] = this.update_state(dirty_tree[k], obj[k], ...args.slice(1));\n          }\n        }\n        if (key !== $any && !(key in obj)) {\n          if (!dirty_tree[key]) {\n            dirty_tree[key] = {};\n          }\n          obj[key] = this.update_state(dirty_tree[key], undefined, ...args.slice(1));\n        }\n        obj.__aff_tick = this.patch_tick + 1;\n        return obj;\n      } else {\n        throw['bad update path', obj, args];\n      }\n    }\n  }\n\n  setup_state_object(obj) {\n    if (obj.hasOwnProperty('__aff_tick')) {\n      obj.__aff_tick = this.patch_tick + 1;\n      return\n    }\n    Object.defineProperty(obj, '__aff_tick', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: this.patch_tick + 1,\n    });\n  }\n\n  // patch last_element to represent node attributes, with diffing last_node\n  patch(last_element, node, last_node) {\n    // thunk\n    let last_thunk;\n    if (last_node && last_node instanceof Thunk) {\n      last_thunk = last_node;\n      last_node = last_thunk.node;\n    }\n    let thunk;\n    if (node instanceof Thunk) {\n      thunk = node;\n    }\n\n    let should_update = false;\n    if (!thunk || !last_thunk) {\n      should_update = true;\n    } else if (thunk.name != last_thunk.name) {\n      should_update = true;\n    } else if (thunk.args.length != last_thunk.args.length) {\n      should_update = true;\n    } else {\n      for (let i = 0; i < thunk.args.length; i++) {\n        let arg = thunk.args[i];\n        let last_arg = last_thunk.args[i];\n        if (arg instanceof SubState && last_arg instanceof SubState) {\n          let max_dirty_index = -1;\n          let max_same_index = -1;\n          let dirty_tree = this.dirty_tree;\n          let last_path = last_arg.path;\n          for (let index = 0; index < arg.path.length; index++) {\n            if (dirty_tree && dirty_tree[arg.path[index]]) {\n              dirty_tree = dirty_tree[arg.path[index]];\n              max_dirty_index = index;\n            }\n            if (last_path[index] == arg.path[index]) {\n              max_same_index = index;\n            }\n          }\n          if (max_dirty_index == arg.path.length - 1) {\n            should_update = true;\n            break\n          }\n          if (max_same_index != arg.path.length - 1) {\n            should_update = true;\n            break\n          }\n        } else if (arg === last_arg && typeof arg === 'object' && arg.__aff_tick === this.patch_tick) {\n          should_update = true;\n          break\n        } else if (!equal(arg, last_arg)) {\n          should_update = true;\n          break\n        }\n      }\n    }\n\n    if (thunk) {\n      if (last_thunk && !should_update) {\n        // reuse node\n        thunk.node = last_thunk.node;\n        // reuse element\n        thunk.element = last_thunk.element;\n      }\n      node = thunk.getNode();\n    }\n\n    // Thunk.getNode may return another Thunk, patch recursively\n    if (node instanceof Thunk || last_node instanceof Thunk) {\n      return this.patch(last_element, node, last_node);\n    }\n\n    // no need to patch if two Nodes is the same object\n    // if thunk's node is reuse, will return here\n    if (node === last_node) {\n      return [last_element, node];\n    }\n\n    // not patchable, build a new element\n    if (\n      // not diffable\n      (!last_node)\n      // different tag, no way to patch\n      || (node.tag != last_node.tag)\n    ) {\n      let element;\n      if (!node || !node.toElement) {\n        element = warning(`RENDER ERROR: cannot render ${node}`).toElement();\n        console.warn('cannot render', node);\n      } else {\n        element = node.toElement(undefined, this);\n      }\n      // insert new then remove old\n      if (last_element.parentNode) {\n        last_element.parentNode.insertBefore(element, last_element);\n        last_element.parentNode.removeChild(last_element);\n      }\n      // cache last_element\n      if (last_node) {\n        this.element_cache[last_element.tagName.toLowerCase()].push([last_element, last_node]);\n      }\n\n      return [element, node];\n    }\n\n    return this.patch_node(last_element, node, last_node, thunk);\n  }\n\n  patch_node(last_element, node, last_node, thunk) {\n    // innerHTML\n    if (node.innerHTML != last_node.innerHTML) {\n      last_element.innerHTML = node.innerHTML;\n    }\n\n    // text\n    if (node.text != last_node.text) {\n      last_element.nodeValue = node.text;\n    }\n\n    // id\n    if (node.id != last_node.id) {\n      last_element.id = node.id;\n    }\n\n    // styles\n    let style_type = typeof node.style;\n    let last_style_type = typeof last_node.style;\n    if (style_type != last_style_type || style_type == 'string') {\n      // not diffable\n      if (style_type == 'object') {\n        // remove all existing style\n        last_element.style = null;\n        // reset\n        for (let key in node.style) {\n          last_element.style[key] = node.style[key];\n        }\n      } else {\n        // set string style\n        if (node.style != last_node.style) {\n          last_element.style = node.style;\n        }\n      }\n    } else {\n      if (node.style && last_node.style) {\n        // common styles\n        for (let key in node.style) {\n          if (node.style[key] != last_node.style[key]) {\n            last_element.style[key] = node.style[key];\n          }\n        }\n        // delete styles exist in old Node but not in new\n        if (typeof last_node.style === 'object') {\n          for (let key in last_node.style) {\n            if (!(key in node.style)) {\n              last_element.style[key] = '';\n            }\n          }\n        }\n      } else if (node.style) {\n        // new Node only\n        for (let key in node.style) {\n          last_element.style[key] = node.style[key];\n        }\n      } else if (last_node.style) {\n        // no style in new Node, delete all\n        last_element.style = undefined;\n      }\n    }\n\n    // class\n    if (node.class != last_node.class) {\n      last_element.className = node.class;\n    }\n\n    // attributes\n    if (node.attributes && last_node.attributes) {\n      // update common attributes\n      for (let key in node.attributes) {\n        if (node.attributes[key] != last_node.attributes[key]) {\n          let value = node.attributes[key];\n          let valueType = typeof value;\n          if (valueType == 'string' || valueType == 'number') {\n            last_element.setAttribute(key, value);\n            last_element[key] = value\n          } else if (valueType == 'boolean') {\n            if (value) {\n              last_element.setAttribute(key, true);\n              last_element[key] = true;\n            } else {\n              last_element.removeAttribute(key);\n              last_element[key] = false;\n            }\n          }\n        }\n      }\n      // delete non-exist attributes\n      for (let key in last_node.attributes) {\n        if (!(key in node.attributes)) {\n          last_element.removeAttribute(key);\n          last_element[key] = undefined;\n        }\n      }\n    } else if (node.attributes) {\n      // set new attributes only\n      for (let key in node.attributes) {\n        let value = node.attributes[key];\n        let valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          last_element.setAttribute(key, value);\n          last_element[key] = value;\n        } else if (valueType == 'boolean') {\n          if (value) {\n            last_element.setAttribute(key, true);\n            last_element[key] = true;\n          } else {\n            last_element.removeAttribute(key);\n            last_element[key] = false;\n          }\n        }\n      }\n    } else if (last_node.attributes) {\n      // no attributes in new Node, delete all\n      for (let key in last_node.attributes) {\n        last_element.removeAttribute(key);\n        last_element[key] = undefined;\n      }\n    }\n    \n    // events\n    // not implementing global event proxy\n    if (node.events && last_node.events) {\n      for (let key in node.events) {\n        // set events, bind current node to callback function\n        // to enable referencing current node\n        element_set_listener(last_element, key, node.events[key].bind(node));\n      }\n      let serial = last_element.__element_serial;\n      for (let key in element_events[serial]) {\n        if (!(key in node.events)) {\n          element_events[serial][key] = false;\n        }\n      }\n    } else if (node.events) {\n      for (let key in node.events) {\n        // set events, bind current node to callback function\n        element_set_listener(last_element, key, node.events[key].bind(node));\n      }\n    } else if (last_node.events) {\n      let serial = last_element.__element_serial;\n      for (let key in element_events[serial]) {\n        element_events[serial][key] = false;\n      }\n    }\n\n    // children\n    if (node.children && last_node.children) {\n      // patch common amount of children\n      let common_length = Math.min(node.children.length, last_node.children.length);\n      let child_elements = last_element.childNodes;\n      for (let i = 0; i < common_length; i++) {\n        // recursive patch\n        this.patch(child_elements[i], node.children[i], last_node.children[i]);\n      }\n      // insert new children\n      for (let i = common_length, l = node.children.length; i < l; i++) {\n        if (!node.children[i] || !node.children[i].toElement) {\n          last_element.appendChild(warning(`RENDER ERROR: cannot render ${node.children[i]}`).toElement());\n          console.warn('cannot render', node.children[i]);\n        } else {\n          last_element.appendChild(node.children[i].toElement(undefined, this));\n        }\n      }\n      // delete\n      for (let i = common_length, l = last_node.children.length; i < l; i++) {\n        last_element.removeChild(last_element.childNodes[common_length]);\n      }\n    } else if (node.children) {\n      // insert only\n      for (let i = 0, l = node.children.length; i < l; i++) {\n        if (!node.children[i] || !node.children[i].toElement) {\n          last_element.appendChild(warning(`RENDER ERROR: cannot render ${node.children[i]}`).toElement());\n          console.warn('cannot render', node.children[i]);\n        } else {\n          last_element.appendChild(node.children[i].toElement(undefined, this));\n        }\n      }\n    } else if (last_node.children) {\n      // delete only\n      while (last_element.firstChild) {\n        last_element.removeChild(last_element.firstChild);\n      }\n    }\n\n    // set element\n    node.element = last_element;\n    if (thunk) {\n      thunk.element = last_element;\n    }\n\n    if (node.hooks && node.hooks.patched) {\n      node.hooks.patched.forEach(fn => fn(last_element));\n    }\n\n    return [last_element, node];\n  }\n}\n\nclass SubState {\n  constructor(app, path) {\n    this.app = app;\n    this.path = path;\n  }\n\n  get() {\n    return this.app.get(this.path);\n  }\n\n  update(...args) {\n    return this.app.update(...this.path, ...args);\n  }\n\n  sub(...args) {\n    let subpath = args;\n    if (subpath.length == 1 && Array.isArray(subpath[0])) {\n      subpath = subpath[0];\n    }\n    return new SubState(this.app, [...this.path, ...subpath]);\n  }\n}\n\nclass Thunk {\n  constructor() {\n    this.func = null;\n    this.args = null;\n    this.node = null;\n    this.element = null;\n    this.name = null;\n  }\n\n  toElement(_name, app) {\n    if (!this.element) {\n      let node = this.getNode();\n      if (!node || !node.toElement) {\n        this.element = warning(`RENDER ERROR: cannot render ${node}`).toElement();\n        console.warn('cannot render', node);\n      } else {\n        this.element = node.toElement(this.name, app);\n      }\n    }\n    return this.element;\n  }\n\n  getNode() {\n    if (!this.node) {\n      beforeThunkCallFunc(this);\n      this.node = this.func.apply(this, this.args);\n      afterThunkCallFunc(this);\n      if (!this.node) {\n        throw['constructor of ' + (this.name || 'anonymous') + ' returned null value', this];\n      }\n    }\n    return this.node;\n  }\n\n}\n\n// thunk helper\nexport function t(...args) {\n  if (args.length == 0) {\n    throw['no arguments to t()'];\n  }\n\n  let thunk = new Thunk();\n\n  switch (typeof args[0]) {\n  case 'string': // named thunk\n    thunk.name = args[0];\n    thunk.func = args[1];\n    thunk.args = args.slice(2);\n    break\n\n  case 'function':\n    thunk.func = args[0];\n    thunk.args = args.slice(1);\n    thunk.name = thunk.func.name;\n    break\n  }\n\n  return thunk\n}\n\n// element helper\nexport function e(...args) {\n  if (args.length === 0) {\n    throw['no arguments to e()'];\n  }\n\n  // Thunk\n  if (typeof args[0] === 'function') {\n    let thunk = new Thunk();\n    thunk.func = args[0];\n    thunk.args = args.slice(1);\n    // set thunk name from function, may be undefined\n    thunk.name = thunk.func.name; \n    return thunk;\n  }\n\n  let node = new Node();\n\n  let arg1, arg2;\n\n  switch (args.length) {\n  case 1:\n    // tag only, eg. e('hr')\n    node.tag = args[0];\n\n    break\n\n  case 2:\n    // two args, first the tag, second a selector or children or properties\n    // eg. e('div', '#main .block')\n    // or e('div', 'Hello, world')\n    // or e('div', [ e('p', 'Hello, world') ])\n    // or e('div', { id: 'main' })\n    node.tag = args[0];\n    arg1 = args[1];\n\n    switch (typeof arg1) {\n    case 'string':\n      if (arg1[0] == '#' || arg1[0] == '.') { // selector\n        node.set_selector(arg1);\n      } else { // text node\n        node.set_children(arg1);\n      }\n      break\n\n    case 'number':\n      node.set_children(arg1);\n      break\n\n    case 'object':\n      if (Array.isArray(arg1) || (arg1 instanceof Node) || (arg1 instanceof Thunk)) { // children\n        node.set_children(arg1);\n      } else { // properties\n        node.set_properties(arg1);\n      }\n      break\n\n    default:\n      throw['bad argument at index 1 to e()', args];\n    }\n\n    break\n\n  case 3:\n    // three args, first the tag, second a selector or properties, third children or properties\n    // eg. e('div', '#main', [ e('p', 'Hello') ])\n    // or e('div', { id: 'main' }, [])\n    node.tag = args[0];\n\n    arg1 = args[1];\n    switch (typeof arg1) {\n    case 'string':\n      node.set_selector(arg1);\n      break\n    case 'object':\n      node.set_properties(arg1);\n      break\n    default:\n      throw['bad argument at index 1 to e()', args];\n    }\n\n    arg2 = args[2];\n    if (typeof arg2 == 'object' && !Array.isArray(arg2) && !(arg2 instanceof Node) && !(arg2 instanceof Thunk)) {\n      node.set_properties(arg2);\n    } else {\n      node.set_children(arg2);\n    }\n\n    break\n\n  case 4:\n    // four arguments. first tag, second selector, third properties, forth children\n    // eg e('div', '#main', { class: 'foo' }, [ e('div') ])\n    node.tag = args[0];\n    node.set_selector(args[1]);\n    node.set_properties(args[2]);\n    node.set_children(args[3]);\n\n    break\n\n  default:\n    throw['bad arguments to e()', args];\n  }\n\n  return node;\n}\n\nlet beforeThunkCallFunc = (thunk) => {};\nlet afterThunkCallFunc = (thunk) => {};\nexport let setBeforeThunkCallFunc = (fn) => {\n  beforeThunkCallFunc = fn;\n}\nexport let setAfterThunkCallFunc = (fn) => {\n  afterThunkCallFunc = fn;\n}\n\nlet element_serial = 1;\n\nclass Node {\n  constructor() {\n    this.tag = null;\n    this.id = null;\n    this.style = null;\n    this.class = null;\n    this.children = null;\n    this.attributes = null;\n    this.events = null;\n    this.text = null;\n    this.innerHTML = null;\n    this.element = null;\n    this.hooks = null;\n  }\n\n  set_selector(selector) {\n    let classes = [];\n    let parts = selector.match(/[.#][A-Za-z][A-Za-z0-9_:-]*/g);\n    for (let i = 0, l = parts.length; i < l; i++) {\n      let part = parts[i];\n      if (part.charAt(0) == '#') {\n        this.id = part.substring(1);\n      } else if (part.charAt(0) == '.') {\n        classes.push(part.substring(1));\n      }\n    }\n    let cls = classes.join(' ');\n    if (cls.length > 0) {\n      this.class = cls;\n    }\n  }\n\n  set_properties(properties) {\n    for (let key in properties) {\n      if (key == 'id' || key == 'innerHTML') {\n        // id, innerHTML\n        this[key] = properties[key];\n      } else if (key == 'class') {\n        let property = properties.class;\n        if (typeof property == 'string') {\n          this.class = property;\n        } else if (typeof property == 'object') {\n          if (Array.isArray(property)) {\n            this.class = property.join(' ');\n          } else {\n            let classes = [];\n            for (let k in property) {\n              let v = property[k];\n              if (v) {\n                classes.push(k);\n              }\n            }\n            this.class = classes.join(' ');\n          }\n        } else {\n          throw['bad class', property];\n        }\n      } else if (key == 'style') {\n        // styles\n        this.style = properties.style;\n      } else if (/^on/.test(key) && typeof properties[key] === 'function') {\n        if (key == 'oncreated' || key == 'oncreate') {\n          this.hooks = this.hooks || {};\n          this.hooks.created = this.hooks.created || [];\n          this.hooks.created.push(properties[key]);\n        } else if (key == 'onpatch' || key == 'onpatched') {\n          this.hooks = this.hooks || {};\n          this.hooks.patched = this.hooks.patched || [];\n          this.hooks.patched.push(properties[key]);\n        } else {\n          // events\n          this.events = this.events || {};\n          this.events[key] = properties[key];\n        }\n      } else {\n        //if (\n        //  (this.tag == 'input' && key == 'checked' && !properties[key])\n        //  || (this.tag == 'input' && key == 'disabled' && !properties[key])\n        //  || (this.tag == 'button' && key == 'disabled' && !properties[key])\n        //) {\n        //  continue\n        //}\n        // attributes\n        this.attributes = this.attributes || {};\n        this.attributes[key] = properties[key];\n      }\n    }\n  }\n\n  set_children(children) {\n    this.children = this.children || [];\n    if (Array.isArray(children)) {\n      // flatten\n      for (let i = 0, l = children.length; i < l; i++) {\n        this.set_children(children[i]);\n      }\n    } else if (typeof children === 'string' || typeof children === 'number') {\n      let child = new Node();\n      child.text = children;\n      this.children.push(child);\n    } else {\n      this.children.push(children);\n    }\n  }\n\n  toElement(name, app) {\n    let element;\n    if (this.text !== null) {\n      element = document.createTextNode(this.text);\n    } else {\n      // use cached element\n      if (app && app.element_cache[this.tag].length > 0) {\n        let [element, last_node] = app.element_cache[this.tag].pop();\n        return app.patch_node(element, this, last_node)[0];\n      }\n      element = document.createElement(this.tag);\n      element.setAttribute('aff-serial', element_serial);\n      if (name) {\n        element.setAttribute('aff-name', name);\n      }\n      element_serial++;\n    }\n    if (this.innerHTML !== null) {\n      element.innerHTML = this.innerHTML;\n    }\n    if (this.id !== null) {\n      element.id = this.id;\n    }\n    if (this.style !== null) {\n      if (typeof this.style == 'object') {\n        for (let key in this.style) {\n          element.style[key] = this.style[key];\n        }\n      } else {\n        element.style = this.style;\n      }\n    }\n    if (this.class !== null) {\n      element.className = this.class;\n    }\n    if (this.children !== null) {\n      for (let i = 0, l = this.children.length; i < l; i++) {\n        if (!this.children[i] || !this.children[i].toElement) {\n          element.appendChild(warning(`RENDER ERROR: cannot render ${this.children[i]}`).toElement());\n          console.warn('cannot render', this.children[i]);\n        } else {\n          element.appendChild(this.children[i].toElement(undefined, app));\n        }\n      }\n    }\n    if (this.attributes !== null) {\n      for (let key in this.attributes) {\n        let value = this.attributes[key];\n        let valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          element.setAttribute(key, value);\n          element[key] = value;\n        } else if (valueType == 'boolean') {\n          if (value) {\n            element.setAttribute(key, true);\n            element[key] = true;\n          } else {\n            element.removeAttribute(key);\n            element[key] = false;\n          }\n        }\n      }\n    }\n    if (this.events !== null) {\n      for (let key in this.events) {\n        // set event callback, bind current Node to callback\n        // constructor must not be arrow function to get proper 'this'\n        element_set_listener(element, key, this.events[key].bind(this));\n      }\n    }\n    this.element = element;\n    if (this.hooks && this.hooks.created) {\n      this.hooks.created.forEach(fn => fn(element));\n    }\n    return element;\n  }\n\n}\n\nlet warning = (text) => e('div', {\n  style: {\n    backgroundColor: 'yellow',\n    color: 'red',\n    fontWeight: 'bold',\n  },\n}, text);\n\nlet element_events = {};\nlet element_set_listener = (() => {\n  let next_element_serial = 1;\n  return function(element, ev_type, fn) {\n    let serial = element.__element_serial;\n    if (!serial) {\n      serial = next_element_serial;\n      next_element_serial++;\n      element.__element_serial = serial;\n    }\n    let event_set = element_events[serial];\n    if (!event_set) {\n      event_set = {};\n      element_events[serial] = event_set;\n    }\n    if (!(ev_type in event_set)) {\n      element.addEventListener(ev_type.substr(2), function(ev) {\n        return element_events[serial][ev_type](ev);\n      });\n    }\n    event_set[ev_type] = fn;\n  }\n})();\n\nexport function equal(a, b) {\n  if (a === b) {\n    return true;\n  }\n  let type_a = typeof a;\n  let type_b = typeof b;\n  if (type_a !== type_b) {\n    return false;\n  }\n  if (type_a === 'object') {\n    if (a instanceof SubState && b instanceof SubState) {\n      return equal(a.get(), b.get());\n    }\n    // deep compare\n    let keys_a = Object.keys(a);\n    let keys_b = Object.keys(b);\n    if (keys_a.length != keys_b.length) {\n      return false;\n    }\n    for (let key in a) {\n      if (!equal(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  } else if (type_a === 'function') {\n    return a.name === b.name;\n  }\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app.js","// operations \n\nexport let $inc = {\n  __is_op: true,\n  op: 'inc',\n  apply(obj) {\n    return (obj || 0) + 1;\n  },\n};\n\nexport let $dec = {\n  __is_op: true,\n  op: 'dec',\n  apply(obj) {\n    return obj - 1;\n  }\n};\n\nexport let $merge = (spec) => ({\n  __is_op: true,\n  op: 'merge',\n  args: [spec],\n  apply(obj, app) {\n    if (Array.isArray(spec)) {\n      return app.update_state(app.dirty_tree, obj, ...spec);\n    }\n    for (let key in spec) {\n      let o2 = spec[key];\n      if (typeof o2 == 'object' && !Array.isArray(o2) && !o2.__is_op) {\n        obj = app.update_state(app.dirty_tree, obj, key, $merge(o2));\n      } else {\n        obj = app.update_state(app.dirty_tree, obj, key, o2);\n      }\n    }\n    return obj;\n  },\n});\n\nexport let $push = (elem) => ({\n  __is_op: true,\n  op: 'push',\n  args: [elem],\n  apply(obj) {\n    obj.push(elem);\n    return obj;\n  },\n});\n\nexport let $reduce = (fn, accumulated, what = 'reduce') => ({\n  __is_op: true,\n  op: what,\n  args: [fn, accumulated],\n  apply(obj) {\n    for (let key in obj) {\n      accumulated = fn(accumulated, obj[key], key);\n    }\n    return accumulated;\n  },\n});\n\nexport let $del_at = (i) => $reduce((acc, cur, index) => {\n  if (index != i) {\n    acc.push(cur);\n  }\n  return acc;\n}, [], 'del_at');\n\nexport let $map = (fn) => $reduce((acc, cur, index) => {\n  acc.push(fn(cur));\n  return acc;\n}, [], 'map');\n\nexport let $filter = (fn) => ({\n  __is_op: true,\n  op: 'filter',\n  args: [fn],\n  apply(obj) {\n    if (typeof obj == 'object') {\n      if (Array.isArray(obj)) {\n        let o2 = [];\n        for (let i = 0; i < obj.length; i++) {\n          if (fn(obj[i], i)) {\n            o2.push(obj[i]);\n          }\n        }\n        return o2;\n      } else {\n        let o2 = {};\n        for (let k in obj) {\n          if (fn(obj[k], k) === true) {\n            o2[k] = obj[k];\n          }\n        }\n        return o2;\n      }\n    } else {\n      return fn(obj);\n    }\n  },\n});\n\n// predictions\n\nexport let $any = { __predict_any: true };\n\n// utils\n\nexport function pick(obj, ...keys) {\n  if (typeof obj === 'object') {\n    if (Array.isArray(obj)) {\n      let new_obj = [];\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        if (obj[key] !== undefined) {\n          new_obj.push(obj[key]);\n        }\n      }\n      return new_obj;\n    } else {\n      let new_obj = {};\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        if (obj[key] !== undefined) {\n          new_obj[key] = obj[key];\n        }\n      }\n      return new_obj;\n    }\n  } else {\n    throw['not pickable', obj, keys];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state.js","export { \n  App, \n  t, e, \n  setBeforeThunkCallFunc, setAfterThunkCallFunc,\n} from './app';\nexport * from './state';\nexport * from './tags';\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import {e} from './app'\nimport { all_tags } from './all_tags'\n\nlet helpers = all_tags.reduce((helpers, tag) => {\n  helpers[tag] = function(...args) {\n    return e(tag, ...args);\n  };\n  helpers[tag.charAt(0).toUpperCase() + tag.slice(1)] = helpers[tag];\n  helpers[tag.toUpperCase()] = helpers[tag];\n  return helpers;\n}, {});\n\nmodule.exports = {\n  ...helpers,\n\n  none: e('div', {\n    style: {\n      display: 'none',\n    },\n  }),\n\n  clear: e('div', {\n    style: {\n      clear: 'both',\n    },\n  }),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./tags.js"],"sourceRoot":""}