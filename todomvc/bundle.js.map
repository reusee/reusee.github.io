{"version":3,"sources":["webpack:///webpack/bootstrap 11947138bfd951b6dd20","webpack:///./examples/todomvc/main.js","webpack:///./index.js","webpack:///./app.js","webpack:///./all_tags.js","webpack:///./event.js","webpack:///./mutable_state.js","webpack:///./state.js","webpack:///./nodes.js","webpack:///./tagged.js","webpack:///./panel.js","webpack:///./operations.js","webpack:///./tags.js"],"names":["saved","JSON","parse","window","localStorage","getItem","init_state","todos","filter","Header","TodoList","Todo","Footer","app","document","getElementById","state","setItem","stringify","placeholder","autofocus","e","keyCode","element","value","length","$update","completed","content","todo","i","classList","editing","checked","map","reduce","n","c","info","style","location","hash","b","onclick","Info","href","Main","all_completed","for","init","onhashchange","update","App","t","skip","$","css","key","on","readOnly","ref","weakRef","cached","wrap","DebugPanel","node","patching","updated","updateCount","elementCache","textNodeCache","commentNodeCache","counters","thunkFuncCall","nativeNodeCreate","nodeCacheHit","jobs","events","args","arg","HTMLElement","idx","addEvent","nodeFunc","_state","setupState","get","undefined","obj","path","scopes","Array","isArray","p","slice","push","keys","Object","getOwnPropertyNames","bindings","subStateKeys","subState","name","found","stopPath","sameLen","from","defineProperty","configurable","enumerable","set","v","__aff_wo_ref_keys","writable","pop","stopLen","setupPath","parentPathOfFrom","__aff_ref_keys","ev","parts","type","split","subtype","join","fn","apply","updateMulti","dispatchEvent","beforePatch","elem","toElement","parentNode","insertBefore","removeChild","result","patch","innerHTML","lastElement","lastNode","lastThunk","thunk","shouldUpdate","argsChanged","getNode","patchable","constructor","tag","cacheNode","patchNode","isTextOrComment","text","nodeValue","childElements","childNodes","childLen","children","child","offset","splice","appendChild","lastChildLen","updateAttr","attributes","valueType","isStringOrNumber","setAttribute","removeAttribute","tagName","setTimeout","removeAttr","eventKeys","k","bind","__aff_events","id","updateClass","add","remove","deleteClass","styleType","lastStyleType","updateStyle","clearStyle","hooks","patched","forEach","toLowerCase","allTags","elementSetEvent","Event","Events","addEventListener","substr","preventDefault","ret","lastEvType","lastFn","MutableState","initState","patchTick","updateState","statePath","object","__is_op","setupPatchTick","__aff_tick","forceSetup","hasOwnProperty","updateKey","oldValue","__aff_sub_tick","keyType","match","lastArg","argType","__aff_tick_update_at","fromPath","tick","parentValue","__aff_read_only","needSetup","$path","expanded","acc","cur","subPath","State","Reference","WeakReference","results","call","props","wrapped","create","Node","ElementNode","shift","created","createElement","className","trim","childFragment","createDocumentFragment","l","selector","part","charAt","substring","properties","sameKey","property","currentType","test","isCreatedHook","isPatchHook","isText","TextNode","toString","createTextNode","CommentNode","createComment","Thunk","func","str","_e","skipFollowingArguments","setChildren","setSelector","setProperties","Selector","Css","Key","makeTagger","strings","values","logSerial","debugState","__debug_panel","initialized","ctrlKey","logState","updates","ignore","show","panelBackgroundColor","leftPanelWidth","bottomPanelHeight","selectedTab","Tabs","LeftPanel","PanelPosition","CloseButton","BottomPanel","PointingPath","pointingPath","MainContent","appState","lastTab","querySelector","scrollTop","AppState","Updates","top","left","right","bottom","StateNode","sort","a","valueNode","subpath","bindPointingPath","debugStatePath","log","UpdateLogEntry","formatArg","op","makeButton","width","panelWidthPercent","height","panelHeightPercent","$func","$delete","prop","$del","$inc","$dec","arrayOps","prototype","unshift","fill","method","reverse","$merge","spec","_merge","$any","allOperations","module","exports","helpers","toUpperCase","checkbox","none","clear","None","NONE","Clear","CLEAR","Checkbox","CHECKBOX","h"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 11947138bfd951b6dd20","import {\n  App, t, on, css, $, weakRef, ref,\n  section, header, footer, h1, p, a, div, span,\n  input, ul, li, none, button, strong, label, checkbox,\n  $any, $push, $splice, $filter, $merge,\n  DebugPanel,\n} from '../../index'\n\nconst saved = JSON.parse(window.localStorage.getItem('todomvc')) || {};\n\nconst init_state = {\n  todos: saved.todos || [],\n  filter: saved.filter || 'All',\n\n  Header: {\n    todos: weakRef('todos'),\n  },\n\n  TodoList: {\n    todos: ref('todos'),\n    filter: ref('filter'),\n\n    Todo: {\n      todos: weakRef('todos'),\n    },\n  },\n\n  Footer: {\n    todos: ref('todos'),\n    filter: ref('filter'),\n  },\n};\n\nconst app = new App(\n  document.getElementById('app'),\n  on('afterUpdate: save to local storage', (state, ...args) => {\n    window.localStorage.setItem('todomvc', JSON.stringify({\n      todos: state.todos,\n      filter: state.filter,\n    }));\n  }),\n  init_state,\n);\n\nconst Header = (state) => header($`.header`,\n  h1('todos'),\n  input($`.new-todo`, \n    {\n      placeholder: \"What needs to be done?\",\n      autofocus: 'autofocus',\n    }, \n    on('keypress', function(e) {\n      if (e.keyCode != 13 || this.element.value.length == 0) {\n        return\n      }\n      state.todos.$update($push({\n        completed: false,\n        content: this.element.value,\n      }));\n      this.element.value = '';\n    }),\n  ),\n);\n\nconst Todo = (state, todo, i) => li(\n  { \n    classList: {\n      completed: todo.completed,\n      editing: todo.editing,\n    },\n  },\n  div($`.view`,\n    checkbox($`.toggle`, \n      {\n        checked: todo.completed,\n      },\n      on('click', function() {\n        state.todos.$update(i, 'completed', this.element.checked);\n      }),\n    ),\n    label(todo.content, on('dblclick', () => {\n      state.todos.$update(i, 'editing', true);\n    })),\n    button($`.destroy`, on('click', () => {\n      state.todos.$update($splice(i, 1));\n    })),\n  ),\n  input($`.edit`, \n    {\n      value: todo.content,\n    },\n    on('keypress', function(e) {\n      if (e.keyCode == 13) {\n        state.todos.$update(i, $merge({\n          content: this.element.value,\n          editing: false,\n        }));\n      }\n    }),\n  ),\n);\n\nconst TodoList = (state) => ul($`.todo-list`, \n  state.todos.map((todo, i) => {\n    if (state.filter == 'Active' && todo.completed) {\n      return none;\n    } else if (state.filter == 'Completed' && !todo.completed) {\n      return none;\n    }\n    return t(Todo, state.Todo, todo, i);\n  }),\n);\n\nconst Footer = (state) => footer($`.footer`,\n  span($`.todo-count`,\n    strong(state.todos.reduce((n, c) => {\n      return n + (c.completed ? 0 : 1);\n    }, 0)),\n    ' item left',\n  ),\n  ul($`.filters`, [\n    ['#/', 'All'],\n    ['#/active', 'Active'],\n    ['#/completed', 'Completed'],\n  ].map(info => li(\n    a(info[1], {\n      style: `cursor: pointer`,\n      classList: state.filter == info[1] ? 'selected' : '', \n    }, on('click', () => { \n      window.location.hash = info[0];\n    })),\n  ))),\n  state.todos.reduce((b, c) => b || c.completed, false) ? button({\n    classList: 'clear-completed',\n    onclick() {\n      state.todos.$update($filter(todo => !todo.completed));\n    },\n  }, 'Clear completed') : none,\n);\n\nconst Info = footer($`.info`,\n  p('Double-click to edit a todo'),\n  p('Created by ',\n    a({ href: 'http://todomvc.com' }, 'reusee@qq.com'),\n  ),\n);\n\nconst Main = (state) => div(\n  section($`.todoapp`,\n    t(Header, state.Header),\n    state.todos.length > 0 ? section($`.main`,\n      checkbox($`.toggle-all`, on('click', () => {\n        let all_completed = state.todos.reduce((b, c) => b && c.completed, true);\n        state.$update('todos', $any, 'completed', all_completed ? false : true);\n      })),\n      label({\n        for: 'toggle-all',\n      }, 'Mark all as complete'),\n      t(TodoList, state.TodoList),\n    ) : none,\n    state.todos.length > 0 ? t(Footer, state.Footer) : none,\n  ),\n  Info,\n  DebugPanel(app),\n);\n\napp.init(Main);\n\nwindow.onhashchange = () => {\n  let hash = window.location.hash;\n  if (hash == '#/active') {\n    app.update('filter', 'Active');\n  } else if (hash == '#/completed') {\n    app.update('filter', 'Completed');\n  } else {\n    app.update('filter', 'All');\n  }\n};\n\nwindow.onhashchange();\n\n\n\n// WEBPACK FOOTER //\n// ./examples/todomvc/main.js","export { App } from './app';\nexport { t, e, skip } from './nodes';\nexport { $, css, key } from './tagged';\nexport { on } from './event';\nexport { readOnly, ref, weakRef, cached, wrap } from './state';\nexport { DebugPanel } from './panel';\nexport * from './operations';\nexport * from './tags';\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import { allTags } from './all_tags'\nimport { Events } from './event'\nimport { MutableState } from './mutable_state'\nimport { Reference, WeakReference } from './state'\nimport { Node, ElementNode, CommentNode, TextNode, Thunk } from './nodes'\nimport { elementSetEvent } from './event'\n\nexport class App {\n  constructor(...args) {\n    this.node = null;\n    this.patching = false;\n    this.updated = false;\n    this.updateCount = 0;\n    this.elementCache = {};\n    for (let i = 0; i < allTags.length; i++) {\n      this.elementCache[allTags[i]] = [];\n    }\n    this.textNodeCache = [];\n    this.commentNodeCache = [];\n    this.counters = {\n      thunkFuncCall: 0,\n      nativeNodeCreate: 0,\n      nodeCacheHit: 0,\n    };\n    this.jobs = [];\n    this.events = {};\n    this.init(...args);\n  }\n\n  init(...args) {\n    for (let i = 0; i < args.length; i++) {\n      const arg = args[i];\n      if (arg instanceof HTMLElement) {\n        this.element = arg;\n      } else if (arg instanceof Events) {\n        for (let idx = 0; idx < arg.events.length; idx++) {\n          this.addEvent(arg.events[idx]);\n        }\n      } else if (typeof arg == 'function') {\n        this.nodeFunc = arg;\n      } else {\n        this._state = new MutableState(arg, this);\n        this.setupState(this._state.get());\n      }\n    }\n    if (\n      this.element !== undefined \n      && this.nodeFunc !== undefined \n      && this._state !== undefined\n    ) {\n      this.update();\n    }\n  }\n\n  setupState(obj, path = [], scopes = []) {\n    // skip non-object\n    if (typeof obj !== 'object') {\n      return\n    } else if (obj === null) {\n      return\n    }\n\n    // array\n    if (Array.isArray(obj)) {\n      // setup items\n      for (let i = 0; i < obj.length; i++) {\n        let p = path.slice(0);\n        p.push(i);\n        this.setupState(obj[i], p, scopes);\n      }\n      return\n    }\n\n    const app = this;\n    const keys = Object.getOwnPropertyNames(obj);\n    const bindings = {};\n    const subStateKeys = [];\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n\n      const p = path.slice(0);\n      p.push(key);\n      bindings[key] = p;\n\n      const subState = obj[key];\n      if (subState instanceof Reference) {\n        const name = subState.name;\n        // search in scopes\n        let found = false;\n        for (let i = scopes.length - 1; i >= 0; i--) {\n          const bindings = scopes[i];\n          if (!(name in bindings)) {\n            continue\n          }\n          found = true;\n          let stopPath = bindings[name].slice(0);\n          // check loop\n          let sameLen = 0;\n          for (let idx = 0; idx < stopPath.length && idx < path.length; idx++) {\n            if (stopPath[idx] == path[idx]) {\n              sameLen++\n            } else {\n              break\n            }\n          }\n          if (sameLen == stopPath.length) {\n            throw['loop in reference', path, stopPath];\n          } \n          // setup getter and setter\n          if (subState instanceof WeakReference) {\n            const from = bindings[name];\n            Object.defineProperty(obj, key, {\n              configurable: false,\n              enumerable: true,\n              get: function() {\n                return app.get(from);\n              },\n              set: function(v) {\n                app.update(...from, v);\n              },\n            });\n            if (!obj.__aff_wo_ref_keys) {\n              Object.defineProperty(obj, '__aff_wo_ref_keys', {\n                configurable: false,\n                writable: true,\n                enumerable: false,\n                value: {},\n              });\n            }\n            obj.__aff_wo_ref_keys[key] = true;\n          } else {\n            stopPath.pop();\n            const stopLen = stopPath.length;\n            let setupPath = path.slice(0);\n            while (setupPath.length > stopLen) {\n              const obj = this.get(setupPath);\n              const from = bindings[name];\n              const parentPathOfFrom = from.slice(0);\n              parentPathOfFrom.pop();\n              Object.defineProperty(obj, key, {\n                configurable: false,\n                enumerable: true,\n                get: function() {\n                  return app.get(from);\n                },\n                set: function(v) {\n                  app.update(...from, v);\n                },\n              });\n              if (!obj.__aff_ref_keys) {\n                Object.defineProperty(obj, '__aff_ref_keys', {\n                  configurable: false,\n                  writable: true,\n                  enumerable: false,\n                  value: {},\n                });\n              }\n              obj.__aff_ref_keys[key] = from;\n              setupPath.pop();\n            }\n          }\n          break // stop searching\n        }\n        if (!found) {\n          throw[`no state named ${name}`];\n        }\n      } \n\n      else {\n        subStateKeys.push(key);\n      }\n\n    }\n\n    scopes = scopes.slice(0); // copy\n    scopes.push(bindings);\n\n    for (let i = 0; i < subStateKeys.length; i++) {\n      const key = subStateKeys[i];\n      const subState = obj[key];\n      let p = path.slice(0);\n      p.push(key);\n      this.setupState(subState, p, scopes);\n    }\n\n  }\n\n  addEvent(ev) {\n    const parts = ev.type.split(/[$:]/);\n    const type = parts[0];\n    let subtype = parts.slice(1).join(':');\n    if (!subtype) {\n      subtype = '__default';\n    }\n    if (!(type in this.events)) {\n      this.events[type] = {};\n    }\n    const events = this.events[type];\n    events[subtype] = ev.fn;\n  }\n\n  dispatchEvent(type, ...args) {\n    for (const subtype in this.events[type]) {\n      this.events[type][subtype].apply(this, args);\n    }\n  }\n\n  get state() {\n    return this._state.get();\n  }\n\n  update(...args) {\n    return this.updateMulti(args);\n  }\n\n  updateMulti(...args) {\n    if (this._state === undefined) {\n      throw['state not set'];\n    }\n    for (let i = 0; i < args.length; i++) {\n      let arg = args[i];\n      this.dispatchEvent('beforeUpdate', this.state, ...arg);\n      this._state.update(...arg);\n      this.dispatchEvent('afterUpdate', this.state, ...arg);\n    }\n    if (!this.element) {\n      return\n    } else if (!this.nodeFunc) {\n      return\n    }\n    if (!this.patching) {\n      this.patching = true;\n      this.updated = false;\n      this.updateCount = 0;\n      this._state.beforePatch();\n      if (!this.node) {\n        // first render\n        this.node = this.nodeFunc(this.state, this);\n        const elem = this.node.toElement(this);\n        if (this.element.parentNode) {\n          this.element.parentNode.insertBefore(elem, this.element);\n          this.element.parentNode.removeChild(this.element);\n        }\n        this.element = elem;\n      } else {\n        const result = this.patch(\n          this.element, \n          this.nodeFunc(this.state, this), \n          this.node,\n        );\n        this.element = result[0];\n        this.node = result[1];\n      }\n      while (this.updated) {\n        if (this.updateCount > 128) { // infinite loop\n          throw['infinite loop in updating', args];\n        }\n        // if state is updated when patching, patch again\n        this.updated = false;\n        this._state.beforePatch();\n        const result = this.patch(\n          this.element,\n          this.nodeFunc(this.state, this),\n          this.node,\n        );\n        this.element = result[0];\n        this.node = result[1];\n      }\n      if (this.jobs.length > 0) {\n        for (let i = this.jobs.length - 1; i >= 0; i--) {\n          this.jobs[i]();\n        }\n        this.jobs = [];\n      }\n      this.patching = false;\n      this.updateCount = 0;\n    } else {\n      // state updated when patching\n      this.updated = true;\n      this.updateCount++;\n    }\n    return\n  }\n\n  html() {\n    return this.element.innerHTML;\n  }\n\n  get(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    let obj = this.state;\n    for (let i = 0; i < path.length; i++) {\n      obj = obj[path[i]];\n    }\n    return obj;\n  }\n\n  // patch lastElement to represent node attributes, with diffing lastNode\n  patch(lastElement, node, lastNode) {\n    if (!lastElement) {\n      throw['bad last element'];\n    }\n    if (!lastNode) {\n      throw['bad last node'];\n    }\n\n    // thunk\n    let lastThunk;\n    if (lastNode instanceof Thunk) {\n      lastThunk = lastNode;\n      lastNode = lastThunk.node;\n    }\n    let thunk;\n    if (node instanceof Thunk) {\n      thunk = node;\n    }\n\n    if (thunk) {\n      let shouldUpdate = false;\n      if (!lastThunk) {\n        shouldUpdate = true;\n      } else if (thunk.name != lastThunk.name) {\n        shouldUpdate = true;\n      } else if (this._state.argsChanged(thunk.args, lastThunk.args)) {\n        shouldUpdate = true;\n      }\n\n      if (lastThunk && !shouldUpdate) {\n        // reuse node\n        thunk.node = lastThunk.node;\n        // reuse element\n        thunk.element = lastThunk.element;\n      }\n      node = thunk.getNode(this);\n    }\n\n    // Thunk.getNode may return another Thunk, patch recursively\n    if (node instanceof Thunk) {\n      return this.patch(lastElement, node, lastNode);\n    }\n\n    // no need to patch if two Nodes is the same object\n    // if thunk's node is reuse, will return here\n    if (node === lastNode) {\n      return [lastElement, node];\n    }\n\n    // check if patchable\n    let patchable = true;\n    if (node.constructor != lastNode.constructor) {\n      patchable = false;\n    } else if (node instanceof ElementNode  && (node.tag != lastNode.tag)) {\n      patchable = false;\n    }\n    if (!patchable) {\n      const element = node.toElement(this);\n      // insert new then remove old\n      if (lastElement.parentNode) {\n        lastElement.parentNode.insertBefore(element, lastElement);\n        lastElement.parentNode.removeChild(lastElement);\n      }\n      // cache lastElement\n      this.cacheNode(lastElement, lastNode);\n\n      return [element, node];\n    }\n\n    // set element\n    node.element = lastElement;\n    if (thunk) {\n      thunk.element = lastElement;\n    }\n\n    return this.patchNode(lastElement, node, lastNode);\n  }\n\n  patchNode(lastElement, node, lastNode) {\n    // text and comment node\n    let isTextOrComment = false;\n    if (node instanceof TextNode) {\n      isTextOrComment = true;\n    } else if (node instanceof CommentNode) {\n      isTextOrComment = true;\n    }\n    if (isTextOrComment) {\n      if (node.text != lastNode.text) {\n        lastElement.nodeValue = node.text;\n      }\n      return [lastElement, node];\n    }\n\n    // children\n    let childElements = lastElement.childNodes;\n    const childLen = node.children ? node.children.length : 0;\n    for (let i = 0; i < childLen; i++) {\n      const child = node.children[i];\n      if (\n        child.key \n        && lastNode.children \n        && lastNode.children[i] \n        && lastNode.children[i].key != child.key\n      ) { // keyed\n        // search for same key\n        let found = false;\n        for (let offset = 0; offset < 10; offset++) {\n          if (lastNode.children[i + offset] && lastNode.children[i + offset].key == child.key) {\n            found = true;\n            // found same key, delete some\n            for (let n = 0; n < offset; n++) {\n              const elem = lastElement.removeChild(childElements[i]);\n              this.cacheNode(elem, lastNode.children[i]);\n              lastNode.children.splice(i, 1);\n            }\n            childElements = lastElement.childNodes;\n            // patch\n            this.patch(\n              childElements[i],\n              child,\n              lastNode.children[i],\n            );\n            break\n          }\n        }\n        if (!found) {\n          // insert new\n          const elem = child.toElement(this);\n          lastElement.insertBefore(elem, childElements[i]);\n          childElements = lastElement.childNodes;\n          lastNode.children.splice(i, 0, null);\n        }\n      } else {\n        // not keyed\n        if (!childElements[i]) {\n          const elem = child.toElement(this);\n          lastElement.appendChild(elem);\n        } else {\n          this.patch(\n            childElements[i], \n            child,\n            lastNode.children[i],\n          );\n        }\n      }\n    }\n    const lastChildLen = lastNode.children ? lastNode.children.length : 0;\n    for (let i = childLen; i < lastChildLen; i++) {\n      const elem = lastElement.removeChild(lastElement.childNodes[childLen]);\n      this.cacheNode(elem, lastNode.children[i]);\n    }\n\n    this.jobs.push(function() {\n\n    // innerHTML\n    if (node.innerHTML != lastNode.innerHTML) {\n      lastElement.innerHTML = node.innerHTML;\n    }\n\n    // attributes\n    for (const key in node.attributes) {\n      let updateAttr = false;\n      if (!lastNode.attributes) {\n        updateAttr = true;\n      } else if (node.attributes[key] != lastNode.attributes[key]) {\n        updateAttr = true;\n      }\n      if (updateAttr) {\n        const value = node.attributes[key];\n        const valueType = typeof value;\n        let isStringOrNumber = false;\n        if (valueType === 'string') {\n          isStringOrNumber = true;\n        } else if (valueType === 'number') {\n          isStringOrNumber = true;\n        }\n        if (isStringOrNumber) {\n          lastElement.setAttribute(key, value);\n          lastElement[key] = value\n        } else if (valueType == 'boolean') {\n          const set = () => {\n            if (value) {\n              lastElement.setAttribute(key, true);\n              lastElement[key] = true;\n            } else {\n              lastElement.removeAttribute(key);\n              lastElement[key] = false;\n            }\n          };\n          if (lastElement.tagName === 'INPUT' && lastElement.type == 'checkbox') {\n            setTimeout(set, 0);\n          } else {\n            set();\n          }\n        }\n      }\n    }\n    for (const key in lastNode.attributes) {\n      let removeAttr = false;\n      if (!node.attributes) {\n        removeAttr = true;\n      } else if (!(key in node.attributes)) {\n        removeAttr = true;\n      }\n      if (removeAttr) {\n        lastElement.removeAttribute(key);\n        lastElement[key] = undefined;\n      }\n    }\n\n    // events\n    const eventKeys = {};\n    for (const key in node.events) {\n      let k = elementSetEvent(lastElement, key, node.events[key].bind(node));\n      eventKeys[k] = true;\n    }\n    if (lastElement.__aff_events) {\n      for (const type in lastElement.__aff_events) {\n        for (const subtype in lastElement.__aff_events[type]) {\n          if (!(type + ':' + subtype in eventKeys)) {\n            delete lastElement.__aff_events[type][subtype];\n          }\n        }\n      }\n    }\n\n    // id\n    if (node.id != lastNode.id) {\n      lastElement.id = node.id;\n    }\n\n    // class\n    for (const key in node.classList) {\n      // should update\n      let updateClass = false;\n      if (!lastNode.classList) {\n        updateClass = true;\n      } else if (node.classList[key] != lastNode.classList[key]) {\n        updateClass = true;\n      }\n      if (updateClass) {\n        if (node.classList[key]) {\n          lastElement.classList.add(key);\n        } else {\n          lastElement.classList.remove(key);\n        }\n      }\n    }\n    for (const key in lastNode.classList) {\n      let deleteClass = false;\n      if (!node.classList) {\n        deleteClass = true;\n      } else if (!(key in node.classList)) {\n        deleteClass = true;\n      }\n      if (deleteClass) {\n        lastElement.classList.remove(key);\n      }\n    }\n\n    // styles\n    const styleType = typeof node.style;\n    const lastStyleType = typeof lastNode.style;\n    // different type, no diff\n    if (styleType !== lastStyleType) {\n      lastElement.style = undefined;\n      if (styleType === 'string') {\n        lastElement.style = node.style;\n      } else if (styleType === 'object' && node.style !== null) {\n        for (const key in node.style) {\n          lastElement.style[key] = node.style[key];\n        }\n      }\n    } \n    // diff object\n    else if (styleType === 'object') {\n      if (node.style !== null) {\n        for (const key in node.style) {\n          let updateStyle = false;\n          if (!lastNode.style) {\n            updateStyle = true;\n          } else if (node.style[key] != lastNode.style[key]) {\n            updateStyle = true;\n          }\n          if (updateStyle) {\n            lastElement.style[key] = node.style[key];\n          }\n        }\n      }\n      if (lastNode.style !== null) {\n        for (const key in lastNode.style) {\n          let clearStyle = false;\n          if (!node.style) {\n            clearStyle = true;\n          } else if (!(key in node.style)) {\n            clearStyle = true;\n          }\n          if (clearStyle) {\n            lastElement.style[key] = '';\n          }\n        }\n      }\n    } \n    // string, compare\n    else if (styleType === 'string') {\n      if (node.style !== lastNode.style) {\n        lastElement.style = node.style;\n      }\n    }\n\n    // hook\n    if (node.hooks && node.hooks.patched) {\n      node.hooks.patched.forEach(fn => fn(lastElement));\n    }\n\n    }) // push job\n\n    return [lastElement, node];\n  }\n\n  cacheNode(element, node) {\n    if (node instanceof TextNode) {\n      this.textNodeCache.push([element, node]);\n    } else if (node instanceof CommentNode) {\n      this.commentNodeCache.push([element, node]);\n    } else if (node instanceof ElementNode) {\n      this.elementCache[element.tagName.toLowerCase()].push([element, node]);\n    } else if (node instanceof Thunk) {\n      while (node instanceof Thunk) {\n        node = node.getNode(this);\n        this.cacheNode(element, node);\n      }\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./app.js","export const allTags = [\n\n  // html\n  'a', 'abbr', 'acronym', 'address', 'applet', 'area', 'article', 'aside', 'audio',\n  'b', 'base', 'basefont', 'bdi', 'bdo', 'bgsound', 'big', 'blink', 'blockquote', 'body', 'br', 'button',\n  'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'command', 'content',\n  'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt',\n  'element', 'em', 'embed',\n  'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'frame', 'frameset',\n  'head', 'header', 'hgroup', 'hr', 'html',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7',\n  'i', 'iframe', 'image', 'img', 'input', 'ins', 'isindex',\n  'kbd', 'keygen',\n  'label', 'legend', 'li', 'link', 'listing',\n  'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'multicol',\n  'nav', 'nobr', 'noembed', 'noframes', 'noscript',\n  'object', 'ol', 'optgroup', 'option', 'output',\n  'p', 'param', 'picture', 'plaintext', 'pre', 'progress',\n  'q',\n  'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'script', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup',\n  'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'tt',\n  'u', 'ul',\n  'var', 'video',\n  'wbr',\n  'xmp',\n\n  // svg\n  'a', 'altGlyph', 'altGlyphDef', 'altGlyphItem', 'animate', 'animateColor', 'animateMotion', 'animateTransform', 'audio',\n  'canvas', 'circle', 'clipPath', 'color-profile', 'cursor',\n  'defs', 'desc', 'discard',\n  'ellipse',\n  'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight',\n  'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology',\n  'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter',\n  'font', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignObject',\n  'g', 'glyph', 'glyphRef',\n  'hatch', 'hatchpath', 'hkern',\n  'iframe', 'image',\n  'line', 'linearGradient',\n  'marker', 'mask', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'metadata', 'missing-glyph', 'mpath',\n  'path', 'pattern', 'polygon', 'polyline',\n  'radialGradient', 'rect',\n  'script', 'set', 'solidcolor', 'stop', 'style', 'svg', 'switch', 'symbol',\n  'text', 'textPath', 'title', 'tref', 'tspan',\n  'unknown', 'use',\n  'video', 'view', 'vkern',\n\n];\n\n\n\n// WEBPACK FOOTER //\n// ./all_tags.js","class Event {\n  constructor(type, fn) {\n    this.type = type;\n    this.fn = fn;\n  }\n}\n\nexport class Events {\n  constructor() {\n    this.events = [];\n  }\n\n  on(type, fn) {\n    this.events.push(new Event(type, fn));\n    return this;\n  }\n}\n\nexport function on(type, fn) {\n  const events = new Events();\n  events.on(type, fn);\n  return events;\n}\n\nexport function elementSetEvent(element, type, fn) {\n  let events = element.__aff_events;\n  if (!events) {\n    events = {};\n    element.__aff_events = events;\n  }\n  const parts = type.split(/[$:]/);\n  type = parts[0];\n  const subtype = parts.slice(1).join(':') || '__default';\n  if (!(type in events)) {\n    events[type] = {};\n    element.addEventListener(type.substr(2), function(ev) {\n      if (element.tagName == 'INPUT' && element.type == 'checkbox' && type == 'onclick') {\n        ev.preventDefault();\n      }\n      let ret;\n      let lastEvType;\n      let lastFn;\n      for (const subtype in events[type]) {\n        const result = events[type][subtype](ev);\n        if (ret === undefined) {\n          ret = result;\n          lastEvType = type + ':' + subtype;\n          lastFn = events[type][subtype];\n        } else if (ret !== result) {\n          throw[`return value conflict between event handlers: ${type}:${subtype} and ${lastEvType}`,\n            events[type][subtype], lastFn];\n        }\n      }\n      return ret;\n    });\n  }\n  events[type][subtype] = fn;\n  return type + ':' + subtype;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./event.js","import { State } from './state'\n\nexport class MutableState extends State {\n  constructor(initState, app) {\n    super();\n    this.app = app;\n    this.patchTick = 1;\n    this.state = initState;\n    this.setupState(this.state, [], false);\n  }\n\n  get() {\n    return this.state;\n  }\n\n  update(...arg) {\n    this.state = this.updateState([], this.state, ...arg);\n  }\n\n  updateState(statePath, object, ...args) {\n    let obj = object;\n    if (args.length === 0) {\n      return obj;\n    } else if (args.length === 1) {\n      let ret;\n      if (typeof args[0] === 'object' && args[0] !== null && args[0].__is_op) {\n        ret = args[0].apply(obj, this);\n        if (typeof ret === 'object' && ret !== null && ret === obj) {\n          this.setupPatchTick(ret);\n          ret.__aff_tick = this.patchTick + 1;\n        }\n      } else {\n        ret = args[0];\n      }\n      let forceSetup = false;\n      if (Array.isArray(obj) && Array.isArray(ret)) {\n        // re-setup arrays conservatively\n        forceSetup = true;\n      }\n      this.setupState(ret, statePath, forceSetup);\n      if (typeof ret === 'object' && ret !== null && !ret.hasOwnProperty('__aff_tick')) {\n        this.setupPatchTick(ret);\n        ret.__aff_tick = this.patchTick + 1;\n      }\n      return ret;\n    } else {\n      if (!obj) {\n        obj = {};\n      }\n      if (typeof obj === 'object' && obj !== null) {\n        if (!obj.hasOwnProperty('__aff_tick')) {\n          this.setupPatchTick(obj);\n        }\n        let updated = false;\n        const updateKey = (key, ...args) => {\n          const oldValue = obj[key];\n          const path = statePath.slice(0);\n          path.push(key);\n          const value = this.updateState(path, ...args);\n          obj[key] = value;\n          if (oldValue != value) {\n            updated = true;\n          }\n          if (typeof value !== 'object' && updated) {\n            obj.__aff_sub_tick[key] = this.patchTick + 1;\n          }\n        }\n        const key = args[0];\n        const keyType = typeof key;\n        for (const k in obj) {\n          let match = false;\n          if (keyType === 'number' && k == key) {\n            match = true;\n          } else if (keyType === 'string' && k == key) {\n            match = true;\n          } else if (keyType === 'function' && key(k)) {\n            match = true;\n          }\n          if (match) {\n            updateKey(k, obj[k], ...args.slice(1));\n          } \n        }\n        let match = false;\n        if (keyType === 'string' && !(key in obj)) {\n          match = true;\n        } else if (keyType === 'number' && !(key in obj)) {\n          match = true;\n        }\n        if (match) {\n          updateKey(key, undefined, ...args.slice(1));\n        }\n        if (updated) {\n          obj.__aff_tick = this.patchTick + 1;\n        }\n        return obj;\n      } else {\n        throw['bad update path', obj, args];\n      }\n    }\n  }\n\n  beforePatch() {\n    this.patchTick++;\n  }\n\n  setupPatchTick(obj) {\n    Object.defineProperty(obj, '__aff_tick', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n    });\n    Object.defineProperty(obj, '__aff_sub_tick', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: {},\n    });\n  }\n\n  argsChanged(arg, lastArg) {\n    const argType = typeof arg;\n\n    // different type\n    if (argType !== typeof lastArg) {\n      return true;\n    }\n\n    // trigger update of ref keys\n    if (\n      arg === lastArg\n      && typeof arg === 'object'\n      && arg != null\n      && arg.__aff_ref_keys\n      && arg.__aff_tick_update_at != this.patchTick\n    ) {\n      for (const key in arg.__aff_ref_keys) {\n        const fromPath = arg.__aff_ref_keys[key].slice(0);\n        const value = this.app.get(fromPath);\n        // get tick\n        let tick;\n        if (value.__aff_tick) {\n          tick = value.__aff_tick;\n        } else if (typeof value !== 'object') { \n          // get from parent\n          const key = fromPath.pop();\n          const parentValue = this.app.get(fromPath);\n          if (parentValue.__aff_sub_tick) {\n            tick = parentValue.__aff_sub_tick[key];\n          }\n        }\n        if (tick == this.patchTick) {\n          if (!arg.hasOwnProperty('__aff_tick')) {\n            this.setupPatchTick(arg);\n          }\n          arg.__aff_tick = tick;\n          if (typeof value !== 'object') {\n            // save tick in parent\n            arg.__aff_sub_tick[key] = tick;\n          }\n        }\n      }\n      Object.defineProperty(arg, '__aff_tick_update_at', {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: this.patchTick,\n      });\n    }\n\n    // patchTick\n    if (\n      arg === lastArg \n      && typeof arg === 'object' \n      && arg !== null \n      && arg.__aff_tick === this.patchTick\n    ) {\n      return true;\n    }\n\n    // array\n    else if (Array.isArray(arg) && Array.isArray(lastArg)) {\n      // different length\n      if (arg.length != lastArg.length) {\n        return true;\n      }\n      // check items\n      for (let i = 0; i < arg.length; i++ ){\n        if (this.argsChanged(arg[i], lastArg[i])) {\n          return true;\n        }\n      }\n    } \n\n    // deep compare object\n    else if (argType === 'object') {\n      // different keys length\n      if (Object.keys(arg).length != Object.keys(lastArg).length) {\n        return true;\n      }\n      for (const key in arg) {\n        if (arg.__aff_wo_ref_keys && arg.__aff_wo_ref_keys[key]) {\n          continue\n        }\n        if (this.argsChanged(arg[key], lastArg[key])) {\n          return true;\n        }\n      }\n    }\n\n    // function\n    //else if (argType === 'function') {\n    //  if (arg.name !== lastArg.name) {\n    //    return true;\n    //  }\n    //}\n\n    // compare\n    else if (arg !== lastArg) {\n      return true;\n    }\n\n    return false;\n  }\n\n  setupState(state, statePath ,forceSetup) {\n    if (typeof state != 'object') {\n      return\n    } else if (state === null) {\n      return\n    } else if (state.__aff_read_only) {\n      return\n    }\n\n    let needSetup = false;\n    if (!state.hasOwnProperty('$update')) {\n      needSetup = true;\n    } else if (forceSetup) {\n      needSetup = true;\n    }\n    if (needSetup) {\n      // set\n      const app = this.app;\n      Object.defineProperty(state, '$update', {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: function(...args) {\n          app.update(...state.$path, ...args);\n        },\n      });\n      Object.defineProperty(state, '$updateMulti', {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: function(...args) {\n          const expanded = args.map(arg => [...state.$path, ...arg]);\n          app.updateMulti(...expanded);\n        },\n      });\n      Object.defineProperty(state, '$path', {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: statePath.slice(0),\n      });\n\n    } else {\n      // no need to setup accessors, check path\n      if (this.app.get(statePath) !== state) {\n        // setting new state\n        if (!(state.$path.reduce((acc, cur, i) => \n          acc && cur == statePath[i], true))) {\n          throw['cannot change state object path', statePath.slice(0), state.$path];\n        }\n      }\n    }\n\n    // recursively\n    for (const key in state) {\n      const subPath = statePath.slice(0);\n      subPath.push(key);\n      this.setupState(state[key], subPath, forceSetup);\n    }\n\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./mutable_state.js","export class State {\n  get() {}\n  update() {}\n  beforePatch() {}\n  argsChanged() {}\n}\n\nexport function readOnly(obj) {\n  if (typeof obj !== 'object' || obj === null) {\n    return obj;\n  }\n  Object.defineProperty(obj, '__aff_read_only', {\n    configurable: false,\n    enumerable: false,\n    writable: false,\n    value: true,\n  });\n  return obj;\n}\n\nexport class Reference {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nexport function ref(name) {\n  return new Reference(name);\n}\n\nexport class WeakReference extends Reference {\n  constructor(name) {\n    super(name);\n  }\n}\n\nexport function weakRef(name) {\n  return new WeakReference(name);\n}\n\nexport function cached(fn) {\n  const results = {};\n  return function(arg) {\n    if (!(arg in results)) {\n      results[arg] = fn.call(this, arg);\n    }\n    return results[arg];\n  }\n};\n\nexport function wrap(obj, props) {\n  const wrapped = Object.create(obj);\n  for (let key in props) {\n    wrapped[key] = props[key];\n  }\n  return wrapped;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state.js","import { elementSetEvent } from './event'\nimport { Selector, Css, Key } from './tagged'\nimport { Events } from './event'\n\nexport class Node {\n  constructor() {\n    this.element = null;\n  }\n}\n\nexport class ElementNode extends Node {\n  constructor() {\n    super();\n    this.tag = null; // for element\n    this.id = null;\n    this.style = null;\n    this.classList = null;\n    this.children = null;\n    this.attributes = null;\n    this.events = null;\n    this.innerHTML = null;\n    this.hooks = null;\n    this.key = null;\n  }\n\n  toElement(app) {\n    let element;\n    // use cached element\n    if (app && app.elementCache[this.tag] && app.elementCache[this.tag].length > 0) {\n      if (app) {\n        app.counters.nodeCacheHit++;\n      }\n      let result = app.elementCache[this.tag].shift();\n      let element = result[0];\n      const lastNode = result[1];\n      result = app.patchNode(element, this, lastNode);\n      element = result[0];\n      this.element = element;\n      if (this.hooks && this.hooks.created) {\n        this.hooks.created.forEach(fn => fn(element));\n      }\n      return element;\n    }\n    element = document.createElement(this.tag);\n    if (app) {\n      app.counters.nativeNodeCreate++;\n    }\n    if (this.innerHTML !== null) {\n      element.innerHTML = this.innerHTML;\n    }\n    if (this.id !== null) {\n      element.id = this.id;\n    }\n    if (this.style !== null) {\n      if (typeof this.style == 'object' && this.style !== null) {\n        for (const key in this.style) {\n          element.style[key] = this.style[key];\n        }\n      } else {\n        element.style = this.style;\n      }\n    }\n    if (this.classList !== null) {\n      let className = '';\n      for (let k in this.classList) {\n        if (this.classList[k]) {\n          className = className + k + ' ';\n        }\n      }\n      element.className = className.trim();\n    }\n    if (this.children !== null) {\n      const childFragment = document.createDocumentFragment();\n      for (let i = 0, l = this.children.length; i < l; i++) {\n        childFragment.appendChild(this.children[i].toElement(app));\n      }\n      element.appendChild(childFragment);\n    }\n    if (this.attributes !== null) {\n      for (const key in this.attributes) {\n        const value = this.attributes[key];\n        const valueType = typeof value;\n        let isStringOrNumber = false;\n        if (valueType === 'string') {\n          isStringOrNumber = true;\n        } else if (valueType === 'number') {\n          isStringOrNumber = true;\n        }\n        if (isStringOrNumber) {\n          element.setAttribute(key, value);\n          element[key] = value;\n        } else if (valueType == 'boolean') {\n          if (value) {\n            element.setAttribute(key, true);\n            element[key] = true;\n          } else {\n            element.removeAttribute(key);\n            element[key] = false;\n          }\n        }\n      }\n    }\n    if (this.events !== null) {\n      for (const key in this.events) {\n        // set event callback, bind current Node to callback\n        // constructor must not be arrow function to get proper 'this'\n        elementSetEvent(element, key, this.events[key].bind(this));\n      }\n    }\n    this.element = element;\n    if (this.hooks && this.hooks.created) {\n      this.hooks.created.forEach(fn => fn(element));\n    }\n    return element;\n  }\n\n  setSelector(selector) {\n    const parts = selector.match(/[.#][A-Za-z][A-Za-z0-9_:-]*/g);\n    if (parts) {\n      for (let i = 0, l = parts.length; i < l; i++) {\n        const part = parts[i];\n        if (part.charAt(0) == '#') {\n          this.id = part.substring(1);\n        } else if (part.charAt(0) == '.') {\n          if (!this.classList) {\n            this.classList = {};\n          }\n          this.classList[part.substring(1)] = true;\n        }\n      }\n    }\n  }\n\n  setProperties(properties) {\n    for (const key in properties) {\n      let sameKey = false;\n      if (key === 'id') {\n        sameKey = true;\n      } else if (key === 'innerHTML') {\n        sameKey = true;\n      }\n      if (sameKey) {\n        // id, innerHTML\n        this[key] = properties[key];\n      } else if (key == 'classList') {\n        if (!this.classList) {\n          this.classList = {};\n        }\n        const property = properties.classList;\n        if (typeof property == 'string') {\n          const parts = property.match(/[A-Za-z][A-Za-z0-9_:-]*/g);\n          if (parts) {\n            for (let i = 0, l = parts.length; i < l; i++) {\n              const part = parts[i];\n              this.classList[part] = true;\n            }\n          }\n        } else if (typeof property == 'object' && property !== null) {\n          if (Array.isArray(property)) {\n            for (let i = 0; i < property.length; i++) {\n              this.classList[property[i]] = true;\n            }\n          } else {\n            for (const k in property) {\n              this.classList[k] = property[k];\n            }\n          }\n        } else {\n          throw['bad class', property];\n        }\n      } else if (key == 'style') {\n        // styles\n        if (this.style === null) {\n          this.style = properties.style;\n        } else {\n          const style = properties.style;\n          const styleType = typeof style;\n          const currentType = typeof this.style;\n          if (styleType != currentType) {\n            throw['should not mix-use object-like style and string-like style', style, this.style];\n          }\n          if (styleType === 'string') {\n            this.style += style;\n          } else if (styleType === 'object') {\n            for (const key in style) {\n              this.style[key] = style[key];\n            }\n          }\n        }\n      } else if (/^on/.test(key) && typeof properties[key] === 'function') {\n        let isCreatedHook = false;\n        let isPatchHook = false;\n        if (key === 'oncreated') {\n          isCreatedHook = true;\n        } else if (key === 'oncreate') {\n          isCreatedHook = true;\n        } else if (key === 'onpatch') {\n          isPatchHook = true;\n        } else if (key === 'onpatched') {\n          isPatchHook = true;\n        }\n        if (isCreatedHook) {\n          if (!this.hooks) {\n            this.hooks = {};\n          }\n          if (!this.hooks.created) {\n            this.hooks.created = [];\n          }\n          this.hooks.created.push(properties[key]);\n        } else if (isPatchHook) {\n          if (!this.hooks) {\n            this.hooks = {};\n          }\n          if (!this.hooks.patched) {\n            this.hooks.patched = [];\n          }\n          this.hooks.patched.push(properties[key]);\n        } else {\n          // events\n          if (!this.events) {\n            this.events = {};\n          }\n          this.events[key] = properties[key];\n        }\n      } else {\n        if (!this.attributes) {\n          this.attributes = {};\n        }\n        this.attributes[key] = properties[key];\n      }\n    }\n  }\n\n  setChildren(children) {\n    if (!this.children) {\n      this.children = [];\n    }\n    const type = typeof children;\n    let isText = false;\n    if (type === 'boolean') {\n      isText = true;\n    } else if (type === 'number') {\n      isText = true;\n    } else if (type === 'string') {\n      isText = true;\n    } else if (type === 'symbol') {\n      isText = true;\n    }\n    if (type === 'object' && children !== null) {\n      this.children.push(children);\n    } else if (isText) {\n      const child = new TextNode();\n      child.text = children.toString();\n      this.children.push(child);\n    } else {\n      throw['bad child', children, this];\n    }\n  }\n  \n}\n\nexport class TextNode extends Node {\n  constructor() {\n    super();\n    this.text = null;\n  }\n\n  toElement(app) {\n    if (app && app.textNodeCache.length > 0) {\n      if (app) {\n        app.counters.nodeCacheHit++;\n      }\n      let result = app.textNodeCache.shift();\n      let element = result[0];\n      const lastNode = result[1];\n      result = app.patchNode(element, this, lastNode);\n      element = result[0];\n      this.element = element;\n      return element;\n    }\n    if (app) {\n      app.counters.nativeNodeCreate++;\n    }\n    return document.createTextNode(this.text);\n  }\n}\n\nexport class CommentNode extends Node {\n  constructor() {\n    super();\n    this.text = null;\n  }\n\n  toElement(app) {\n    if (app && app.commentNodeCache.length > 0) {\n      if (app) {\n        app.counters.nodeCacheHit++;\n      }\n      let result = app.commentNodeCache.shift();\n      let element = result[0];\n      const lastNode = result[1];\n      result = app.patchNode(element, this, lastNode);\n      element = result[0];\n      this.element = element;\n      return element;\n    }\n    if (app) {\n      app.counters.nativeNodeCreate++;\n    }\n    return document.createComment(this.text);\n  }\n}\n\nexport class Thunk extends Node {\n  constructor() {\n    super();\n    this.func = null;\n    this.args = null;\n    this.node = undefined;\n    this.name = null;\n    this.key = null;\n  }\n\n  toElement(app) {\n    if (!this.element) {\n      const node = this.getNode(app);\n      if (node instanceof Node) {\n        this.element = node.toElement(app);\n      } else {\n        throw['thunk function must return a Node', this, node];\n      }\n    }\n    return this.element;\n  }\n\n  getNode(app) {\n    if (!this.node) {\n      this.node = this.func.apply(this, this.args);\n      if (app) {\n        app.counters.thunkFuncCall++;\n      }\n      if (this.node === null) {\n        this.node = new CommentNode();\n        this.node.text = ' none ';\n      }\n      if (!this.node) {\n        throw['constructor of ' + (this.name || 'anonymous') + ' returned undefined value', this];\n      }\n    }\n    return this.node;\n  }\n\n}\n\n// thunk helper\nexport function t(...args) {\n  if (args.length == 0) {\n    throw['no arguments to t()'];\n  }\n  const thunk = new Thunk();\n  switch (typeof args[0]) {\n  case 'string': // named thunk\n    thunk.name = args[0];\n    thunk.func = args[1];\n    thunk.args = [];\n    for (let i = 2; i < args.length; i++) {\n      const arg = args[i];\n      if (arg instanceof Key) {\n        thunk.key = arg.str;\n      } else {\n        thunk.args.push(arg);\n      }\n    }\n    break\n  case 'function':\n    thunk.func = args[0];\n    thunk.name = thunk.func.name;\n    thunk.args = [];\n    for (let i = 1; i < args.length; i++) {\n      const arg = args[i];\n      if (arg instanceof Key) {\n        thunk.key = arg.str;\n      } else {\n        thunk.args.push(arg);\n      }\n    }\n    break\n  }\n  if (!thunk.func) {\n    throw['invalid thunk func', thunk.func];\n  }\n  return thunk\n}\n\n// element helper\nexport function e(tag, ...args) {\n  if (typeof tag !== 'string') {\n    throw['bad tag name', tag];\n  }\n  const node = new ElementNode();\n  node.tag = tag;\n  _e(node, ...args);\n  return node;\n}\n\nexport const skip = { skipFollowingArguments: true };\n\nfunction _e(node, ...args) {\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i];\n    if (arg instanceof Node) {\n      node.setChildren(arg);\n    } else if (arg instanceof Selector) {\n      node.setSelector(arg.str);\n    } else if (arg instanceof Css) {\n      node.setProperties({\n        style: arg.str,\n      });\n    } else if (arg instanceof Events) {\n      for (let idx = 0; idx < arg.events.length; idx++) {\n        const ev = arg.events[idx];\n        node.setProperties({\n          ['on' + ev.type]: ev.fn,\n        });\n      }\n    } else if (arg instanceof Key) {\n      node.key = arg.str;\n    } else if (arg === skip) {\n      break\n    } else if (typeof arg === 'object' && arg !== null) {\n      if (Array.isArray(arg)) {\n        // flatten\n        _e(node, ...arg);\n      } else {\n        node.setProperties(arg);\n      }\n    } else if (arg === null) {\n      // do nothing\n    } else if (typeof arg === 'function') {\n      _e(node, arg());\n    } else {\n      node.setChildren(arg);\n    }\n  }\n  return node;\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./nodes.js","export function Selector(str) {\n  this.str = str;\n}\n\nexport function Css(str) {\n  this.str = str;\n}\n\nexport function Key(str) {\n  this.str = str;\n}\n\nfunction makeTagger(constructor) {\n  function tag(strings, ...values) {\n    let str = '';\n    for (let i = 0; i < strings.length; i++) {\n      str += strings[i];\n      if (values[i] !== undefined) {\n        str += values[i];\n      }\n    }\n    return new constructor(str);\n  }\n  return tag;\n}\n\nexport const $ = makeTagger(Selector);\nexport const css = makeTagger(Css);\nexport const key = makeTagger(Key);\n\n\n\n// WEBPACK FOOTER //\n// ./tagged.js","import { App } from './app'\nimport { t } from './nodes'\nimport { css, $, key } from './tagged'\nimport { on } from './event'\nimport { $func, $push, $merge, $splice } from './operations'\nimport { \n  div, p, none, table, tr, td, span, pre, clear, button,\n} from './tags'\nimport { readOnly } from './state'\n\nlet logSerial = 0;\n\nexport function DebugPanel(app, initState) {\n\n  // check state\n  let debugState = app.state.__debug_panel;\n  if (!debugState) {\n    app.update('__debug_panel', {});\n    debugState = app.state.__debug_panel;\n  }\n\n  // init\n  if (!debugState.initialized) {\n    // hotkey\n    document.addEventListener('keypress', (ev) => {\n      if (ev.keyCode != 17 || !ev.ctrlKey) {\n        return\n      }\n      debugState.$update('show', $func(v => !v));\n    });\n\n    // updates logging\n    let logState = debugState.updates;\n    if (!logState) {\n      debugState.$update('updates', []);\n      logState = debugState.updates;\n    }\n    app.init(on('afterUpdate: aff logging log updates', (state, ...args) => {\n      // to prevent recursive logging\n      const ignore = logState.$path.reduce((acc, cur, i) => acc && cur == args[i], true);\n      if (!ignore) {\n        logState.$update($push({\n          args: readOnly(args),\n          tick: state.__aff_tick,\n          key: logSerial,\n        }));\n        logSerial++;\n      }\n    }));\n\n    // init state\n    if (initState) {\n      debugState.$update($merge(initState));\n    }\n    debugState.$update('initialized', true);\n\n  }\n\n  if (!debugState.show) {\n    return [];\n  }\n\n  // styles\n  const panelBackgroundColor = '#EEE';\n  const leftPanelWidth = '10vw';\n  const bottomPanelHeight = '1em';\n\n  // tabs\n  if (debugState.selectedTab === undefined) {\n    debugState.$update('selectedTab', 'state');\n  }\n  const Tabs = t((debugState) => div(\n    css`\n      list-style: none;\n    `,\n\n    [\n      { name: 'index' },\n      { name: 'state' },\n      { name: 'updates' },\n    ].map(info => {\n      return div(\n        $`.tab-item-${info.name}`,\n        info.name,\n        css`\n          background-color: ${debugState.selectedTab === info.name ? '#DDD' : 'transparent'};\n          padding: 5px;\n          user-select: none;\n          cursor: pointer;\n        `,\n        on('click', () => {\n          debugState.$update('selectedTab', info.name);\n        }),\n      );\n    }),\n\n  ), debugState);\n\n  const LeftPanel = div(\n    css`\n      background-color: ${panelBackgroundColor};\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      min-width: ${leftPanelWidth};\n      margin: 0;\n      text-align: center;\n      left: 0;\n    `,\n\n    p(css` font-weight: bold `, 'Debug Panel'),\n    Tabs,\n\n    // lower left\n    div(\n      css`\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      `,\n\n      PanelPosition(debugState),\n      CloseButton(debugState),\n    ),\n  );\n\n  const BottomPanel = div(\n    css`\n      background-color: ${panelBackgroundColor};\n      position: absolute;\n      left: ${leftPanelWidth};\n      right: 0;\n      bottom: 0;\n      height: ${bottomPanelHeight};\n      font-size: 1em;\n      line-height: 1em;\n    `,\n    t(PointingPath, debugState.pointingPath),\n  );\n\n  const MainContent = t((debugState, appState) => div(\n    $`#main`,\n    css`\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: ${leftPanelWidth};\n      right: 0;\n      top: 0;\n      bottom: ${bottomPanelHeight};\n      border-left: 1px solid #CCC;\n      border-bottom: 1px solid #CCC;\n      overflow: auto;\n    `,\n\n    div(debugState.selectedTab, css` \n      text-align: center; \n      border-bottom: 1px solid #CCC;\n      font-weight: bold;\n      margin-bottom: 3px;\n    `),\n\n    () => {\n      // scroll to top when switching tab\n      const lastTab = debugState.lastTab;\n      if (debugState.selectedTab != lastTab) {\n        const elem = document.querySelector('#main') || window;\n        elem.scrollTop = 0;\n        debugState.$update('lastTab', debugState.selectedTab);\n      }\n\n      if (debugState.selectedTab === 'state') {\n        return t(AppState, appState, debugState);\n      } else if (debugState.selectedTab === 'updates') {\n        return t(Updates, debugState.updates, debugState.$path);\n      }\n\n      return none;\n    },\n\n    div(css`\n      height: 10vh;\n    `),\n\n  ), debugState, app.state);\n\n  return [\n\n    // ui\n    div(\n      css`\n        position: fixed;\n        top: ${debugState.top || 0};\n        left: ${debugState.left || 0};\n        right: ${debugState.right || 0};\n        bottom: ${debugState.bottom || 0};\n        border: 1px solid #666;\n        background-color: white;\n        margin: 1px;\n        font-size: 12px;\n        z-index: 9999;\n        color: #333;\n      `,\n\n      LeftPanel,\n      BottomPanel,\n      MainContent,\n    ),\n\n  ];\n}\n\nfunction AppState(appState, debugState) {\n  return div(\n    css`\n      padding: 0 10px;\n    `,\n    t(StateNode, appState, [], debugState),\n  );\n}\n\nfunction StateNode(appState, path = [], debugState) {\n  return t((appState, path) => table(\n    css`\n      margin: 0 auto;\n      min-width: 100%;\n      border-collapse: collapse;\n      text-align: center;\n    `,\n\n    () => {\n      const ret = [];\n      const keys = Object.keys(appState);\n      keys.sort((a, b) => a > b);\n      const isArray = Array.isArray(appState);\n\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (appState[key] === debugState) { // skip debug state\n          continue\n        }\n        if (key.charAt(0) >= 'A' && key.charAt(0) <= 'Z') { // skip component state\n          continue\n        }\n        let valueNode;\n        if (typeof appState[key] === 'object') {\n          let subpath = path.slice(0);\n          subpath.push(key);\n          valueNode = t(StateNode, appState[key], subpath, debugState);\n        } else {\n          valueNode = appState[key].toString();\n        }\n\n        const bindPointingPath = [\n          on('mouseenter', () => {\n            let pointingPath = path.slice(0);\n            pointingPath.push(key);\n            debugState.$update('pointingPath', pointingPath);\n          }), \n          on('mouseleave', () => {\n            debugState.$update('pointingPath', false);\n          }),\n        ];\n\n        ret.push(tr(\n          css`\n            border: 1px solid #AAA;\n          `,\n          bindPointingPath,\n          // key\n          isArray ? null : td(key, css`\n            background-color: #EEFFEE;\n            padding: 0 10px;\n            vertical-align: top;\n          `, bindPointingPath),\n          // value\n          td($`.state-value`, valueNode, css`\n            padding: 1px;\n          `, bindPointingPath),\n        ));\n\n      }\n      return ret;\n    },\n  ), appState, path);\n}\n\nfunction PointingPath(path) {\n  if (!path) {\n    return none;\n  }\n  return div(\n    'POINTING PATH: ',\n    path.map(key => span(key, css`\n      padding-left: 5px;\n    `)),\n  );\n}\n\nfunction Updates(updates, debugStatePath) {\n  return div(\n    css`\n      padding: 0 10px;\n    `,\n\n    button($`#clear-updates`, 'Clear', on('click', () => {\n      updates.$update([]);\n    })),\n\n    () => {\n      const ret = [];\n      for (let i = updates.length - 1; i >= 0; i--) {\n        const log = updates[i];\n        const ignore = debugStatePath.reduce((acc, cur, i) => acc && cur == log.args[i], true);\n        // ignore debug panel updates\n        if (ignore) {\n          continue\n        }\n\n        ret.push(t(UpdateLogEntry, key`${log.key}`, log));\n\n      }\n      return ret;\n    },\n  );\n}\n\nfunction UpdateLogEntry(log) {\n  return div(\n    css`\n      border-bottom: 1px solid #EEE;\n      margin-bottom: 1px;\n    `,\n\n    key`${log.key}`,\n\n    span(\n      'tick: ', log.tick,\n      css`\n        padding: 0 10px;\n        background-color: #EFE;\n        float: right;\n      `,\n    ),\n\n    log.args.map((arg, i) => span(\n      css`\n        float: left;\n      `,\n\n      span(\n        css`\n          padding: 0 10px;\n          color: #AAA;\n        `,\n\n        () => {\n          if (i > 0 && i != log.args.length - 1) {\n            return '.';\n          } else if (i == log.args.length - 1) {\n            return '=>';\n          } \n          return '';\n        },\n      ),\n      formatArg(arg), \n    )),\n\n    clear,\n  );\n}\n\nfunction formatArg(arg) {\n  if (typeof arg === 'object' && arg.__is_op) {\n    return [\n      span(arg.op, css`\n        text-decoration: underline;\n      `),\n      arg.args ? [\n        ': ',\n        () => {\n          const ret = [];\n          for (let i = 0; i < arg.args.length; i++) {\n            if (i > 0) {\n              ret.push(', ');\n            }\n            ret.push(formatArg(arg.args[i]));\n          }\n          return ret;\n        },\n      ] : [],\n    ];\n\n  } else if (Array.isArray(arg)) {\n    const ret = [\n      '[ ',\n    ];\n    for (let i = 0; i < arg.length; i++) {\n      if (i > 0) {\n        ret.push(', ');\n      }\n      ret.push(formatArg(arg[i]));\n    }\n    ret.push(' ]');\n    return ret;\n\n  } else if (typeof arg === 'object') {\n    const ret = [\n      '{ ',\n    ];\n    let i = 0;\n    for (const key in arg) {\n      if (i > 0) {\n        ret.push(', ');\n      }\n      ret.push([key, ': ', formatArg(arg[key])]);\n      i++;\n    }\n    ret.push(' }');\n    return ret;\n\n  } else if (typeof arg === 'function') {\n    return arg.toString();\n  }\n\n  return arg;\n}\n\n// close panel\nfunction CloseButton(debugState) {\n  return button(\n    $`#close-debug-panel`,\n    css`\n      margin: 10px 0;\n    `,\n    on('click', () => {\n      debugState.$update('show', false);\n    }),\n    'Close',\n  );\n}\n\nfunction PanelPosition(debugState) {\n  function makeButton(text, left, right, top, bottom) {\n    return button(\n      $`#panel-position-${text}`,\n      css`\n        font-size: 10px;\n        width: 3em;\n      `,\n      text,\n      on('click', () => {\n        debugState.$update($merge({\n          left: left,\n          right: right,\n          top: top,\n          bottom: bottom,\n        }));\n      }),\n    );\n  }\n\n  const width = debugState.panelWidthPercent || 45;\n  const height = debugState.panelHeightPercent || 45;\n\n  return div(\n    css`\n      margin: 10px 0;\n    `,\n    div(\n      makeButton('TL', 0, (100 - width) + '%', 0, (100 - height) + '%'),\n      makeButton('TP', 0, 0, 0, (100 - height) + '%'),\n      makeButton('TR', (100 - width) + '%', 0, 0, (100 - height) + '%'),\n    ),\n    div(\n      makeButton('LE', 0, (100 - width) + '%', 0, 0),\n      makeButton('MI', 0, 0, 0, 0),\n      makeButton('RI', (100 - width) + '%', 0, 0, 0),\n    ),\n    div(\n      makeButton('BL', 0, (100 - width) + '%', (100 - height) + '%', 0),\n      makeButton('BO', 0, 0, (100 - height) + '%', 0),\n      makeButton('BR', (100 - width) + '%', 0, (100 - height) + '%', 0),\n    ),\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./panel.js","// operations \n\nlet $func = (fn) => ({\n  __is_op: true,\n  op: 'func',\n  args: [fn],\n  apply(obj) {\n    return fn(obj);\n  },\n});\n\nlet $delete = (prop) => ({\n  __is_op: true,\n  op: 'delete',\n  args: [prop],\n  apply(obj) {\n    delete obj[prop];\n    return obj;\n  },\n});\n\nlet $del = $delete;\n\n// numbers\n\nlet $inc = {\n  __is_op: true,\n  op: 'inc',\n  apply(obj) {\n    return (obj || 0) + 1;\n  },\n};\n\nlet $dec = {\n  __is_op: true,\n  op: 'dec',\n  apply(obj) {\n    return obj - 1;\n  }\n};\n\n// arrays\n\nlet arrayOps = {};\n\n[\n  ['push', Array.prototype.push],\n  ['unshift', Array.prototype.unshift],\n  ['splice', Array.prototype.splice],\n  ['fill', Array.prototype.fill],\n  ['sort', Array.prototype.sort],\n].forEach(info => {\n  arrayOps['$' + info[0]] = ((name, method) => {\n    return function(...args) {\n      return {\n        __is_op: true,\n        op: name,\n        args: args,\n        apply(obj) {\n          method.apply(obj, args);\n          return obj;\n        },\n      };\n    };\n  })(...info);\n});\n\n[\n  ['filter', Array.prototype.filter],\n  ['map', Array.prototype.map],\n].forEach(info => {\n  arrayOps['$' + info[0]] = ((name, method) => {\n    return function(...args) {\n      return {\n        __is_op: true,\n        op: name,\n        args: args,\n        apply(obj) {\n          return method.apply(obj, args);\n        },\n      };\n    };\n  })(...info);\n});\n\n[\n  ['pop', Array.prototype.pop],\n  ['shift', Array.prototype.shift],\n  ['reverse', Array.prototype.reverse],\n].forEach(info => {\n  arrayOps['$' + info[0]] = ((name, method) => {\n    return {\n      __is_op: true,\n      op: name,\n      apply(obj) {\n        method.apply(obj);\n        return obj;\n      },\n    };\n  })(...info);\n});\n\n// objects\n\nfunction $merge(spec) {\n  return {\n    __is_op: true,\n    op: 'merge',\n    args: [spec],\n    apply(obj) {\n      return _merge(obj, spec);\n    },\n  };\n}\n\nfunction _merge(obj, spec) {\n  if (typeof spec === 'object' && spec !== null) {\n    if (spec.__is_op) {\n      return spec.apply(obj);\n    }\n    if (typeof obj !== 'object' || obj === null) {\n      obj = {};\n    }\n    for (const key in spec) {\n      obj[key] = _merge(obj[key], spec[key]);\n    }\n  } else {\n    return spec;\n  }\n  return obj;\n}\n\n// predictions\n\nfunction $any(k) {\n  return true;\n}\n\nconst allOperations = {\n  $func,\n  $delete,\n  $del,\n  $inc,\n  $dec,\n  ...arrayOps,\n  $merge,\n  $any,\n}\n\nconst op = {};\n\nfor (const key in allOperations) {\n  op[key.slice(1)] = allOperations[key];\n}\n\n// export\n\nmodule.exports = {\n  ...allOperations,\n  op,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./operations.js","import { e } from './nodes'\nimport { allTags } from './all_tags'\nimport { css } from './tagged'\nimport { CommentNode } from './nodes'\n\nlet helpers = allTags.reduce((helpers, tag) => {\n  helpers[tag] = function(...args) {\n    return e(tag, ...args);\n  };\n  helpers[tag.charAt(0).toUpperCase() + tag.slice(1)] = helpers[tag];\n  helpers[tag.toUpperCase()] = helpers[tag];\n  return helpers;\n}, {});\n\nconst checkbox = (...args) => e('input', {\n  type: 'checkbox',\n}, ...args);\n\nconst none = new CommentNode();\nnone.text = ' none ';\n\nconst clear = e('div', css`\n  clear: both;\n`);\n\nhelpers = {...helpers,\n  none: none,\n  None: none,\n  NONE: none,\n\n  clear: clear,\n  Clear: clear,\n  CLEAR: clear,\n\n  checkbox: checkbox,\n  Checkbox: checkbox,\n  CHECKBOX: checkbox,\n};\n\nmodule.exports = {\n  ...helpers,\n  h: helpers,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./tags.js"],"sourceRoot":""}