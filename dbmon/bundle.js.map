{"version":3,"sources":["webpack:///webpack/bootstrap 8042f185378cbaadfc0c","webpack:///./examples/dbmon/main.js","webpack:///./index.js","webpack:///./app.js","webpack:///./state.js","webpack:///./tags.js"],"names":["DBMon","state","databases","map","database","DB","dbname","class","lastSample","countClassName","nbQueries","topFiveQueries","query","elapsedClassName","formatElapsed","app","document","getElementById","ENV","generateData","toArray","load","update","Monitoring","renderRate","ping","setTimeout","timeout","App","t","e","setBeforeThunkCallFunc","setAfterThunkCallFunc","equal","node","patching","patch_tick","dirty_tree","next_dirty_tree","updated","update_count","init","args","i","length","arg","HTMLElement","element","node_func","undefined","beforeUpdate","update_state","afterUpdate","patch","fn","res","Array","isArray","innerHTML","path","obj","SubState","ret","__is_op","apply","setup_state_object","hasOwnProperty","key","k","slice","__aff_tick","Object","defineProperty","configurable","enumerable","writable","value","last_element","last_node","last_thunk","Thunk","thunk","should_update","name","last_arg","path_index","getNode","tag","attributes","toElement","warning","console","warn","parentNode","insertBefore","removeChild","text","nodeValue","id","style_type","style","last_style_type","className","valueType","setAttribute","removeAttribute","events","element_set_listener","bind","serial","__element_serial","element_events","children","common_length","Math","min","child_elements","childNodes","l","appendChild","firstChild","hooks","patched","forEach","get","subpath","func","beforeThunkCallFunc","afterThunkCallFunc","Node","arg1","arg2","set_selector","set_children","set_properties","element_serial","selector","classes","parts","match","part","charAt","substring","push","cls","join","properties","property","v","test","created","child","createTextNode","createElement","backgroundColor","color","fontWeight","next_element_serial","ev_type","event_set","addEventListener","substr","ev","a","b","type_a","type_b","keys_a","keys","keys_b","pick","$inc","op","$dec","$merge","spec","o2","$push","elem","$reduce","accumulated","what","$del_at","acc","cur","index","$map","$filter","$any","__predict_any","new_obj","helpers","reduce","toUpperCase","module","exports","none","display","clear"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8042f185378cbaadfc0c","import {\n  App, t,\n  table, tbody, tr, td, div, span ,\n} from '../../index'\n\nfunction DBMon(state) {\n  return div([\n    table('.table .table-striped .latest-data', [\n      tbody([\n        state.databases.map(function(database) {\n          return t(DB, database);\n        }),\n      ]),\n    ]),\n  ]);\n};\n\nfunction DB(database) {\n  return tr({}, [\n    td('.dbname', database.dbname),\n    td('.query-count', [\n      span({ class: database.lastSample.countClassName }, \n        database.lastSample.nbQueries),\n    ]),\n    database.lastSample.topFiveQueries.map(function(query) {\n      return t('Query', function(query) {\n        return td('.Query .' + query.elapsedClassName, [\n          query.formatElapsed,\n          div('.popover .left', [\n            div('.popover-content', query.query),\n            div('.arrow'),\n          ]),\n        ]);\n      }, query);\n    }),\n  ]);\n}\n\nlet app = new App(\n  document.getElementById('app'),\n  DBMon,\n  {\n    databases: ENV.generateData().toArray(),\n  },\n);\n\nfunction load() {\n  app.update('databases', ENV.generateData().toArray());\n  Monitoring.renderRate.ping();\n  setTimeout(load, ENV.timeout);\n};\n\nload();\n\n\n\n\n// WEBPACK FOOTER //\n// ./examples/dbmon/main.js","export { \n  App, \n  t, e, \n  setBeforeThunkCallFunc, setAfterThunkCallFunc,\n} from './app';\nexport * from './state';\nexport * from './tags';\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import { $any } from './state'\n\nexport class App {\n  constructor(...args) {\n    this.node = null;\n    this.patching = false;\n    this.patch_tick = 1;\n    this.dirty_tree = {};\n    this.next_dirty_tree = {};\n    this.updated = false;\n    this.update_count = 0;\n    this.init(...args);\n  }\n\n  init(...args) {\n    for (let i = 0; i < args.length; i++) {\n      let arg = args[i];\n      if (arg instanceof HTMLElement) {\n        this.element = arg;\n      } else if (typeof arg == 'function') {\n        this.node_func = arg;\n      } else {\n        this.state = arg;\n      }\n    }\n    if (this.element !== undefined && this.node_func !== undefined && this.state !== undefined) {\n      this.update();\n    }\n  }\n\n  beforeUpdate() {\n  }\n\n  afterUpdate() {\n  }\n\n  update(...args) {\n    this.beforeUpdate(this.state, ...args);\n    this.state = this.update_state(this.next_dirty_tree, this.state, ...args);\n    this.afterUpdate(this.state, ...args);\n    if (!this.element) {\n      return this.state;\n    }\n    if (!this.patching) {\n      this.patching = true;\n      this.updated = false;\n      this.update_count = 0;\n      this.patch_tick++;\n      this.dirty_tree = this.next_dirty_tree;\n      this.next_dirty_tree = {};\n      [this.element, this.node] = this.patch(this.element, this.node_func(this.state), this.node);\n      while (this.updated) {\n        if (this.update_count > 4096) { // infinite loop\n          throw['infinite loop in updating', args];\n        }\n        // if state is updated when patching, patch again\n        this.updated = false;\n        this.patch_tick++;\n        this.dirty_tree = this.next_dirty_tree;\n        this.next_dirty_tree = {};\n        [this.element, this.node] = this.patch(this.element, this.node_func(this.state), this.node);\n      }\n      this.patching = false;\n      this.update_count = 0;\n    } else {\n      // state updated when patching\n      this.updated = true;\n      this.update_count++;\n    }\n    return this.state;\n  }\n\n  tap(fn) {\n    let res = fn(this.state);\n    if (res) {\n      this.update(...(Array.isArray(res) ? res : [res]));\n    }\n  }\n\n  html() {\n    return this.element.innerHTML;\n  }\n\n  get(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    let obj = this.state;\n    for (let i = 0; i < path.length; i++) {\n      obj = obj[path[i]];\n    }\n    return obj;\n  }\n\n  sub(...args) {\n    let path = args;\n    if (path.length == 1 && Array.isArray(path[0])) {\n      path = path[0];\n    }\n    return new SubState(this, path);\n  }\n\n  update_state(dirty_tree, obj, ...args) {\n    if (args.length === 0) {\n      return obj;\n    } else if (args.length === 1) {\n      let ret;\n      if (typeof args[0] === 'object' && args[0].__is_op) {\n        ret = args[0].apply(obj, this);\n        if (ret === obj) {\n          this.setup_state_object(ret);\n        }\n      } else {\n        ret = args[0];\n      }\n      return ret;\n    } else {\n      if (!obj) {\n        obj = {};\n      }\n      if (typeof obj === 'object') {\n        if (!obj.hasOwnProperty('__aff_tick')) {\n          this.setup_state_object(obj);\n        }\n        let key = args[0];\n        for (let k in obj) {\n          if (k == key || key === $any) {\n            if (!dirty_tree[k]) {\n              dirty_tree[k] = {};\n            }\n            obj[k] = this.update_state(dirty_tree[k], obj[k], ...args.slice(1));\n          }\n        }\n        if (key !== $any && !(key in obj)) {\n          if (!dirty_tree[key]) {\n            dirty_tree[key] = {};\n          }\n          obj[key] = this.update_state(dirty_tree[key], undefined, ...args.slice(1));\n        }\n        obj.__aff_tick = this.patch_tick + 1;\n        return obj;\n      } else {\n        throw['bad update path', obj, args];\n      }\n    }\n  }\n\n  setup_state_object(obj) {\n    if (obj.hasOwnProperty('__aff_tick')) {\n      obj.__aff_tick = this.patch_tick + 1;\n      return\n    }\n    Object.defineProperty(obj, '__aff_tick', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: this.patch_tick + 1,\n    });\n  }\n\n  // patch last_element to represent node attributes, with diffing last_node\n  patch(last_element, node, last_node) {\n    // thunk\n    let last_thunk;\n    if (last_node && last_node instanceof Thunk) {\n      last_thunk = last_node;\n      last_node = last_thunk.node;\n    }\n    let thunk;\n    if (node instanceof Thunk) {\n      thunk = node;\n    }\n\n    let should_update = false;\n    if (!thunk || !last_thunk) {\n      should_update = true;\n    } else if (thunk.name != last_thunk.name) {\n      should_update = true;\n    } else if (thunk.args.length != last_thunk.args.length) {\n      should_update = true;\n    } else {\n      for (let i = 0; i < thunk.args.length; i++) {\n        let arg = thunk.args[i];\n        let last_arg = last_thunk.args[i];\n        if (arg instanceof SubState) {\n          let path_index = 0;\n          let obj = this.dirty_tree;\n          while (path_index < arg.path.length && obj && obj[arg.path[path_index]]) {\n            obj = obj[arg.path[path_index]];\n            path_index++;\n          }\n          if (path_index == arg.path.length) { // dirty\n            should_update = true;\n            break;\n          }\n        } else if (arg === last_arg && typeof arg === 'object' && arg.__aff_tick === this.patch_tick) {\n          should_update = true;\n          break\n        } else if (!equal(arg, last_arg)) {\n          should_update = true;\n          break\n        }\n      }\n    }\n\n    if (thunk) {\n      if (last_thunk && !should_update) {\n        // reuse node\n        thunk.node = last_thunk.node;\n        // reuse element\n        thunk.element = last_thunk.element;\n      }\n      node = thunk.getNode();\n    }\n\n    // Thunk.getNode may return another Thunk, patch recursively\n    if (node instanceof Thunk || last_node instanceof Thunk) {\n      return this.patch(last_element, node, last_node);\n    }\n\n    // no need to patch if two Nodes is the same object\n    // if thunk's node is reuse, will return here\n    if (node === last_node) {\n      return [last_element, node];\n    }\n\n    // not patchable, build a new element\n    if (\n      // not diffable\n      (!last_node)\n      // different tag, no way to patch\n      || (node.tag != last_node.tag)\n      // hacks for input / button with checked / disabled changed\n      || (node.tag == 'input'  && node.attributes && last_node.attributes && node.attributes['checked'] != last_node.attributes['checked'])\n      || (node.tag == 'input'  && node.attributes && last_node.attributes && node.attributes['disabled'] != last_node.attributes['disabled'])\n      || (node.tag == 'button' && node.attributes && last_node.attributes && node.attributes['disabled'] != last_node.attributes['disabled'])\n    ) {\n      let element;\n      if (!node || !node.toElement) {\n        element = warning(`RENDER ERROR: cannot render ${node}`).toElement();\n        console.warn('cannot render', node);\n      } else {\n        element = node.toElement();\n      }\n      // insert new then remove old\n      last_element.parentNode.insertBefore(element, last_element);\n      last_element.parentNode.removeChild(last_element);\n\n      return [element, node];\n    }\n\n    // innerHTML\n    if (node.innerHTML != last_node.innerHTML) {\n      last_element.innerHTML = node.innerHTML;\n    }\n\n    // text\n    if (node.text != last_node.text) {\n      last_element.nodeValue = node.text;\n    }\n\n    // id\n    if (node.id != last_node.id) {\n      last_element.id = node.id;\n    }\n\n    // styles\n    let style_type = typeof node.style;\n    let last_style_type = typeof last_node.style;\n    if (style_type != last_style_type || style_type == 'string') {\n      // not diffable\n      if (style_type == 'object') {\n        // remove all existing style\n        last_element.style = null;\n        // reset\n        for (let key in node.style) {\n          last_element.style[key] = node.style[key];\n        }\n      } else {\n        // set string style\n        if (node.style != last_node.style) {\n          last_element.style = node.style;\n        }\n      }\n    } else {\n      if (node.style && last_node.style) {\n        // common styles\n        for (let key in node.style) {\n          if (node.style[key] != last_node.style[key]) {\n            last_element.style[key] = node.style[key];\n          }\n        }\n        // delete styles exist in old Node but not in new\n        if (typeof last_node.style === 'object') {\n          for (let key in last_node.style) {\n            if (!(key in node.style)) {\n              last_element.style[key] = '';\n            }\n          }\n        }\n      } else if (node.style) {\n        // new Node only\n        for (let key in node.style) {\n          last_element.style[key] = node.style[key];\n        }\n      } else if (last_node.style) {\n        // no style in new Node, delete all\n        last_element.style = undefined;\n      }\n    }\n\n    // class\n    if (node.class != last_node.class) {\n      last_element.className = node.class;\n    }\n\n    // attributes\n    if (node.attributes && last_node.attributes) {\n      // update common attributes\n      for (let key in node.attributes) {\n        if (node.attributes[key] != last_node.attributes[key]) {\n          let value = node.attributes[key];\n          let valueType = typeof value;\n          if (valueType == 'string' || valueType == 'number') {\n            last_element.setAttribute(key, value);\n          } else if (valueType == 'boolean') {\n            if (value) {\n              last_element.setAttribute(key, true);\n            } else {\n              last_element.removeAttribute(key);\n            }\n          }\n        }\n      }\n      // delete non-exist attributes\n      for (let key in last_node.attributes) {\n        if (!(key in node.attributes)) {\n          last_element.removeAttribute(key);\n        }\n      }\n    } else if (node.attributes) {\n      // set new attributes only\n      for (let key in node.attributes) {\n        let value = node.attributes[key];\n        let valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          last_element.setAttribute(key, value);\n        } else if (valueType == 'boolean') {\n          if (value) {\n            last_element.setAttribute(key, true);\n          } else {\n            last_element.removeAttribute(key);\n          }\n        }\n      }\n    } else if (last_node.attributes) {\n      // no attributes in new Node, delete all\n      for (let key in last_node.attributes) {\n        last_element.removeAttribute(key);\n      }\n    }\n    \n    // events\n    // not implementing global event proxy\n    if (node.events && last_node.events) {\n      for (let key in node.events) {\n        // set events, bind current node to callback function\n        // to enable referencing current node\n        element_set_listener(last_element, key, node.events[key].bind(node));\n      }\n      let serial = last_element.__element_serial;\n      for (let key in element_events[serial]) {\n        if (!(key in node.events)) {\n          element_events[serial][key] = false;\n        }\n      }\n    } else if (node.events) {\n      for (let key in node.events) {\n        // set events, bind current node to callback function\n        element_set_listener(last_element, key, node.events[key].bind(node));\n      }\n    } else if (last_node.events) {\n      let serial = last_element.__element_serial;\n      for (let key in element_events[serial]) {\n        element_events[serial][key] = false;\n      }\n    }\n\n    // children\n    if (node.children && last_node.children) {\n      // patch common amount of children\n      let common_length = Math.min(node.children.length, last_node.children.length);\n      let child_elements = last_element.childNodes;\n      for (let i = 0; i < common_length; i++) {\n        // recursive patch\n        this.patch(child_elements[i], node.children[i], last_node.children[i]);\n      }\n      // insert new children\n      for (let i = common_length, l = node.children.length; i < l; i++) {\n        if (!node.children[i] || !node.children[i].toElement) {\n          last_element.appendChild(warning(`RENDER ERROR: cannot render ${node.children[i]}`).toElement());\n          console.warn('cannot render', node.children[i]);\n        } else {\n          last_element.appendChild(node.children[i].toElement());\n        }\n      }\n      // delete\n      for (let i = common_length, l = last_node.children.length; i < l; i++) {\n        last_element.removeChild(last_element.childNodes[common_length]);\n      }\n    } else if (node.children) {\n      // insert only\n      for (let i = 0, l = node.children.length; i < l; i++) {\n        if (!node.children[i] || !node.children[i].toElement) {\n          last_element.appendChild(warning(`RENDER ERROR: cannot render ${node.children[i]}`).toElement());\n          console.warn('cannot render', node.children[i]);\n        } else {\n          last_element.appendChild(node.children[i].toElement());\n        }\n      }\n    } else if (last_node.children) {\n      // delete only\n      while (last_element.firstChild) {\n        last_element.removeChild(last_element.firstChild);\n      }\n    }\n\n    // set element\n    node.element = last_element;\n    if (thunk) {\n      thunk.element = last_element;\n    }\n\n    if (node.hooks && node.hooks.patched) {\n      node.hooks.patched.forEach(fn => fn(last_element));\n    }\n\n    return [last_element, node];\n  }\n}\n\nclass SubState {\n  constructor(app, path) {\n    this.app = app;\n    this.path = path;\n  }\n\n  get() {\n    return this.app.get(this.path);\n  }\n\n  update(...args) {\n    return this.app.update(...this.path, ...args);\n  }\n\n  sub(...args) {\n    let subpath = args;\n    if (subpath.length == 1 && Array.isArray(subpath[0])) {\n      subpath = subpath[0];\n    }\n    return new SubState(this.app, [...this.path, ...subpath]);\n  }\n}\n\nclass Thunk {\n  constructor() {\n    this.func = null;\n    this.args = null;\n    this.node = null;\n    this.element = null;\n    this.name = null;\n  }\n\n  toElement() {\n    if (!this.element) {\n      let node = this.getNode();\n      if (!node || !node.toElement) {\n        this.element = warning(`RENDER ERROR: cannot render ${node}`).toElement();\n        console.warn('cannot render', node);\n      } else {\n        this.element = node.toElement(this.name);\n      }\n    }\n    return this.element;\n  }\n\n  getNode() {\n    if (!this.node) {\n      beforeThunkCallFunc(this);\n      this.node = this.func.apply(this, this.args);\n      afterThunkCallFunc(this);\n      if (!this.node) {\n        throw['constructor of ' + (this.name || 'anonymous') + ' returned null value', this];\n      }\n    }\n    return this.node;\n  }\n\n}\n\n// thunk helper\nexport function t(...args) {\n  if (args.length == 0) {\n    throw['no arguments to t()'];\n  }\n\n  let thunk = new Thunk();\n\n  switch (typeof args[0]) {\n  case 'string': // named thunk\n    thunk.name = args[0];\n    thunk.func = args[1];\n    thunk.args = args.slice(2);\n    break\n\n  case 'function':\n    thunk.func = args[0];\n    thunk.args = args.slice(1);\n    thunk.name = thunk.func.name;\n    break\n  }\n\n  return thunk\n}\n\n// element helper\nexport function e(...args) {\n  if (args.length === 0) {\n    throw['no arguments to e()'];\n  }\n\n  // Thunk\n  if (typeof args[0] === 'function') {\n    let thunk = new Thunk();\n    thunk.func = args[0];\n    thunk.args = args.slice(1);\n    // set thunk name from function, may be undefined\n    thunk.name = thunk.func.name; \n    return thunk;\n  }\n\n  let node = new Node();\n\n  let arg1, arg2;\n\n  switch (args.length) {\n  case 1:\n    // tag only, eg. e('hr')\n    node.tag = args[0];\n\n    break\n\n  case 2:\n    // two args, first the tag, second a selector or children or properties\n    // eg. e('div', '#main .block')\n    // or e('div', 'Hello, world')\n    // or e('div', [ e('p', 'Hello, world') ])\n    // or e('div', { id: 'main' })\n    node.tag = args[0];\n    arg1 = args[1];\n\n    switch (typeof arg1) {\n    case 'string':\n      if (arg1[0] == '#' || arg1[0] == '.') { // selector\n        node.set_selector(arg1);\n      } else { // text node\n        node.set_children(arg1);\n      }\n      break\n\n    case 'number':\n      node.set_children(arg1);\n      break\n\n    case 'object':\n      if (Array.isArray(arg1) || (arg1 instanceof Node) || (arg1 instanceof Thunk)) { // children\n        node.set_children(arg1);\n      } else { // properties\n        node.set_properties(arg1);\n      }\n      break\n\n    default:\n      throw['bad argument at index 1 to e()', args];\n    }\n\n    break\n\n  case 3:\n    // three args, first the tag, second a selector or properties, third children or properties\n    // eg. e('div', '#main', [ e('p', 'Hello') ])\n    // or e('div', { id: 'main' }, [])\n    node.tag = args[0];\n\n    arg1 = args[1];\n    switch (typeof arg1) {\n    case 'string':\n      node.set_selector(arg1);\n      break\n    case 'object':\n      node.set_properties(arg1);\n      break\n    default:\n      throw['bad argument at index 1 to e()', args];\n    }\n\n    arg2 = args[2];\n    if (typeof arg2 == 'object' && !Array.isArray(arg2) && !(arg2 instanceof Node) && !(arg2 instanceof Thunk)) {\n      node.set_properties(arg2);\n    } else {\n      node.set_children(arg2);\n    }\n\n    break\n\n  case 4:\n    // four arguments. first tag, second selector, third properties, forth children\n    // eg e('div', '#main', { class: 'foo' }, [ e('div') ])\n    node.tag = args[0];\n    node.set_selector(args[1]);\n    node.set_properties(args[2]);\n    node.set_children(args[3]);\n\n    break\n\n  default:\n    throw['bad arguments to e()', args];\n  }\n\n  return node;\n}\n\nlet beforeThunkCallFunc = (thunk) => {};\nlet afterThunkCallFunc = (thunk) => {};\nexport let setBeforeThunkCallFunc = (fn) => {\n  beforeThunkCallFunc = fn;\n}\nexport let setAfterThunkCallFunc = (fn) => {\n  afterThunkCallFunc = fn;\n}\n\nlet element_serial = 1;\n\nclass Node {\n  constructor() {\n    this.tag = null;\n    this.id = null;\n    this.style = null;\n    this.class = null;\n    this.children = null;\n    this.attributes = null;\n    this.events = null;\n    this.text = null;\n    this.innerHTML = null;\n    this.element = null;\n    this.hooks = null;\n  }\n\n  set_selector(selector) {\n    let classes = [];\n    let parts = selector.match(/[.#][A-Za-z][A-Za-z0-9_:-]*/g);\n    for (let i = 0, l = parts.length; i < l; i++) {\n      let part = parts[i];\n      if (part.charAt(0) == '#') {\n        this.id = part.substring(1);\n      } else if (part.charAt(0) == '.') {\n        classes.push(part.substring(1));\n      }\n    }\n    let cls = classes.join(' ');\n    if (cls.length > 0) {\n      this.class = cls;\n    }\n  }\n\n  set_properties(properties) {\n    for (let key in properties) {\n      if (key == 'id' || key == 'innerHTML') {\n        // id, innerHTML\n        this[key] = properties[key];\n      } else if (key == 'class') {\n        let property = properties.class;\n        if (typeof property == 'string') {\n          this.class = property;\n        } else if (typeof property == 'object') {\n          if (Array.isArray(property)) {\n            this.class = property.join(' ');\n          } else {\n            let classes = [];\n            for (let k in property) {\n              let v = property[k];\n              if (v) {\n                classes.push(k);\n              }\n            }\n            this.class = classes.join(' ');\n          }\n        } else {\n          throw['bad class', property];\n        }\n      } else if (key == 'style') {\n        // styles\n        this.style = properties.style;\n      } else if (/^on/.test(key) && typeof properties[key] === 'function') {\n        if (key == 'oncreated' || key == 'oncreate') {\n          this.hooks = this.hooks || {};\n          this.hooks.created = this.hooks.created || [];\n          this.hooks.created.push(properties[key]);\n        } else if (key == 'onpatch' || key == 'onpatched') {\n          this.hooks = this.hooks || {};\n          this.hooks.patched = this.hooks.patched || [];\n          this.hooks.patched.push(properties[key]);\n        } else {\n          // events\n          this.events = this.events || {};\n          this.events[key] = properties[key];\n        }\n      } else {\n        //if (\n        //  (this.tag == 'input' && key == 'checked' && !properties[key])\n        //  || (this.tag == 'input' && key == 'disabled' && !properties[key])\n        //  || (this.tag == 'button' && key == 'disabled' && !properties[key])\n        //) {\n        //  continue\n        //}\n        // attributes\n        this.attributes = this.attributes || {};\n        this.attributes[key] = properties[key];\n      }\n    }\n  }\n\n  set_children(children) {\n    this.children = this.children || [];\n    if (Array.isArray(children)) {\n      // flatten\n      for (let i = 0, l = children.length; i < l; i++) {\n        this.set_children(children[i]);\n      }\n    } else if (typeof children === 'string' || typeof children === 'number') {\n      let child = new Node();\n      child.text = children;\n      this.children.push(child);\n    } else {\n      this.children.push(children);\n    }\n  }\n\n  toElement(name) {\n    let element;\n    if (this.text !== null) {\n      element = document.createTextNode(this.text);\n    } else {\n      element = document.createElement(this.tag);\n      element.setAttribute('aff-serial', element_serial);\n      if (name) {\n        element.setAttribute('aff-name', name);\n      }\n      element_serial++;\n    }\n    if (this.innerHTML !== null) {\n      element.innerHTML = this.innerHTML;\n    }\n    if (this.id !== null) {\n      element.id = this.id;\n    }\n    if (this.style !== null) {\n      if (typeof this.style == 'object') {\n        for (let key in this.style) {\n          element.style[key] = this.style[key];\n        }\n      } else {\n        element.style = this.style;\n      }\n    }\n    if (this.class !== null) {\n      element.className = this.class;\n    }\n    if (this.children !== null) {\n      for (let i = 0, l = this.children.length; i < l; i++) {\n        if (!this.children[i] || !this.children[i].toElement) {\n          element.appendChild(warning(`RENDER ERROR: cannot render ${this.children[i]}`).toElement());\n          console.warn('cannot render', this.children[i]);\n        } else {\n          element.appendChild(this.children[i].toElement());\n        }\n      }\n    }\n    if (this.attributes !== null) {\n      for (let key in this.attributes) {\n        let value = this.attributes[key];\n        let valueType = typeof value;\n        if (valueType == 'string' || valueType == 'number') {\n          element.setAttribute(key, value);\n        } else if (valueType == 'boolean') {\n          if (value) {\n            element.setAttribute(key, true);\n          } else {\n            element.removeAttribute(key);\n          }\n        }\n      }\n    }\n    if (this.events !== null) {\n      for (let key in this.events) {\n        // set event callback, bind current Node to callback\n        // constructor must not be arrow function to get proper 'this'\n        element_set_listener(element, key, this.events[key].bind(this));\n      }\n    }\n    this.element = element;\n    if (this.hooks && this.hooks.created) {\n      this.hooks.created.forEach(fn => fn(element));\n    }\n    return element;\n  }\n\n}\n\nlet warning = (text) => e('div', {\n  style: {\n    backgroundColor: 'yellow',\n    color: 'red',\n    fontWeight: 'bold',\n  },\n}, text);\n\nlet element_events = {};\nlet element_set_listener = (() => {\n  let next_element_serial = 1;\n  return function(element, ev_type, fn) {\n    let serial = element.__element_serial;\n    if (!serial) {\n      serial = next_element_serial;\n      next_element_serial++;\n      element.__element_serial = serial;\n    }\n    let event_set = element_events[serial];\n    if (!event_set) {\n      event_set = {};\n      element_events[serial] = event_set;\n    }\n    if (!(ev_type in event_set)) {\n      element.addEventListener(ev_type.substr(2), function(ev) {\n        return element_events[serial][ev_type](ev);\n      });\n    }\n    event_set[ev_type] = fn;\n  }\n})();\n\nexport function equal(a, b) {\n  if (a === b) {\n    return true;\n  }\n  let type_a = typeof a;\n  let type_b = typeof b;\n  if (type_a !== type_b) {\n    return false;\n  }\n  if (type_a === 'object') {\n    if (a instanceof SubState && b instanceof SubState) {\n      return equal(a.get(), b.get());\n    }\n    // deep compare\n    let keys_a = Object.keys(a);\n    let keys_b = Object.keys(b);\n    if (keys_a.length != keys_b.length) {\n      return false;\n    }\n    for (let key in a) {\n      if (!equal(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  } else if (type_a === 'function') {\n    return a.name === b.name;\n  }\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app.js","// operations \n\nexport let $inc = {\n  __is_op: true,\n  op: 'inc',\n  apply(obj) {\n    return (obj || 0) + 1;\n  },\n};\n\nexport let $dec = {\n  __is_op: true,\n  op: 'dec',\n  apply(obj) {\n    return obj - 1;\n  }\n};\n\nexport let $merge = (spec) => ({\n  __is_op: true,\n  op: 'merge',\n  args: [spec],\n  apply(obj, app) {\n    if (Array.isArray(spec)) {\n      return app.update_state(app.dirty_tree, obj, ...spec);\n    }\n    for (let key in spec) {\n      let o2 = spec[key];\n      if (typeof o2 == 'object' && !Array.isArray(o2) && !o2.__is_op) {\n        obj = app.update_state(app.dirty_tree, obj, key, $merge(o2));\n      } else {\n        obj = app.update_state(app.dirty_tree, obj, key, o2);\n      }\n    }\n    return obj;\n  },\n});\n\nexport let $push = (elem) => ({\n  __is_op: true,\n  op: 'push',\n  args: [elem],\n  apply(obj) {\n    obj.push(elem);\n    return obj;\n  },\n});\n\nexport let $reduce = (fn, accumulated, what = 'reduce') => ({\n  __is_op: true,\n  op: what,\n  args: [fn, accumulated],\n  apply(obj) {\n    for (let key in obj) {\n      accumulated = fn(accumulated, obj[key], key);\n    }\n    return accumulated;\n  },\n});\n\nexport let $del_at = (i) => $reduce((acc, cur, index) => {\n  if (index != i) {\n    acc.push(cur);\n  }\n  return acc;\n}, [], 'del_at');\n\nexport let $map = (fn) => $reduce((acc, cur, index) => {\n  acc.push(fn(cur));\n  return acc;\n}, [], 'map');\n\nexport let $filter = (fn) => ({\n  __is_op: true,\n  op: 'filter',\n  args: [fn],\n  apply(obj) {\n    if (typeof obj == 'object') {\n      if (Array.isArray(obj)) {\n        let o2 = [];\n        for (let i = 0; i < obj.length; i++) {\n          if (fn(obj[i], i)) {\n            o2.push(obj[i]);\n          }\n        }\n        return o2;\n      } else {\n        let o2 = {};\n        for (let k in obj) {\n          if (fn(obj[k], k) === true) {\n            o2[k] = obj[k];\n          }\n        }\n        return o2;\n      }\n    } else {\n      return fn(obj);\n    }\n  },\n});\n\n// predictions\n\nexport let $any = { __predict_any: true };\n\n// utils\n\nexport function pick(obj, ...keys) {\n  if (typeof obj === 'object') {\n    if (Array.isArray(obj)) {\n      let new_obj = [];\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        if (obj[key] !== undefined) {\n          new_obj.push(obj[key]);\n        }\n      }\n      return new_obj;\n    } else {\n      let new_obj = {};\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        if (obj[key] !== undefined) {\n          new_obj[key] = obj[key];\n        }\n      }\n      return new_obj;\n    }\n  } else {\n    throw['not pickable', obj, keys];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state.js","import {e} from './app'\n\nlet helpers = [\n  'a', 'abbr', 'acronym', 'address', 'applet', 'area', 'article', 'aside', 'audio',\n  'b', 'base', 'basefont', 'bdi', 'bdo', 'bgsound', 'big', 'blink', 'blockquote', 'body', 'br', 'button',\n  'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'command', 'content',\n  'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt',\n  'element', 'em', 'embed',\n  'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'frame', 'frameset',\n  'head', 'header', 'hgroup', 'hr', 'html',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7',\n  'i', 'iframe', 'image', 'img', 'input', 'ins', 'isindex',\n  'kbd', 'keygen',\n  'label', 'legend', 'li', 'link', 'listing',\n  'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'multicol',\n  'nav', 'nobr', 'noembed', 'noframes', 'noscript',\n  'object', 'ol', 'optgroup', 'option', 'output',\n  'p', 'param', 'picture', 'plaintext', 'pre', 'progress',\n  'q',\n  'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'script', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup',\n  'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'tt',\n  'u', 'ul',\n  'var', 'video',\n  'wbr',\n  'xmp',\n].reduce((helpers, tag) => {\n  helpers[tag] = function(...args) {\n    return e(tag, ...args);\n  };\n  helpers[tag.charAt(0).toUpperCase() + tag.slice(1)] = helpers[tag];\n  helpers[tag.toUpperCase()] = helpers[tag];\n  return helpers;\n}, {});\n\nmodule.exports = {\n  ...helpers,\n\n  none: e('div', {\n    style: {\n      display: 'none',\n    },\n  }),\n\n  clear: e('div', {\n    style: {\n      clear: 'both',\n    },\n  }),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./tags.js"],"sourceRoot":""}